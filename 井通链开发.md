井通链开发

## 概述

```
系统以ubuntu18.04测试为准，@swtc/lib库的示例代码后续再补充,先以swtclib-app的接口api测试为准
多重签名测试链上 ws://ts5.jingtum.com:5030 没有支持，@swtc/lib库无法使用多重签名
```



## 井通公链浏览器

```
https://swtcscan.jccdex.cn/#/home
```



## 测试账号(已激活)

```
    { //有50swt
        "secret": "ssmNtj6a48FJEN3JZqaSGxVndXywi",
        "address": "j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9"
    }

{
    "account": "jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH",
     "secret": "spyihny1sAHHQwoTnUs1vya212bBX"
}
```



## 开发环境搭建



### 1)更新apt包索引

```
apt-get update
```

### 2)安装nodejs

```
apt-get install nodejs
```

### 3)检查node版本

```
node -v
```

### 4)安装npm

```
sudo apt install npm 
```

### 5)检查npm版本

```
npm -v
```

### 6)安装用于安装nodejs的模块n

```
sudo npm install -g n
```

### 7)通过n模块安装指定的nodejs

```
sudo n stable 
```

ps: (stable即node的稳定版)

### 8)升级npm到最新版本

```
sudo npm install npm@latest -g
```

### 9)安装docker

```
sudo apt-get install apt-transport-https ca-certificates curl software-properties-common
```

### 10)安装相关apt包

```
sudo apt-get install apt-transport-https ca-certificates curl software-properties-common
```

### 11)添加Docker官方GPG key

```
sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
```

### 12)设置稳定版Docker仓库

```
sudo add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable"
```

### 13)安装docker-ce

```
sudo apt-get install docker-ce
```

### 14)拉取nodejs镜像

```
sudo docker pull hub.c.163.com/nce2/nodejs:0.12.2
```

### 15)查看拉取的nodejs镜像

```
sudo docker images
```



## 创建nodejs项目(合约)



### 16)创建一个swtc项目

```
mkdir swtc
```

### 17)初始化项目

```
cd swtc
npm init
```

### 18)安装express

```
npm  install -g express  --save
```

### 19)创建server.js文件(创建合约)

```
touch server.js
```

### 20)编辑添加逻辑到server.js(编写合约)

```
var express = require('express');
var app = express();
app.get('/',function(req,res)=>{
    res.send('hello,wolrd!!!\n');
})
app.listen(8888);
```

### 21)运行nodejs项目

```
node server.js
```

### 22)创建dockerfile镜像文件

执行`vim Dockerfile`,并将以下内容复制到Dockerfile中

```
FROM hub.c.163.com/nce2/nodejs:0.12.2
RUN mkdir -p /home/Service
WORKDIR /home/Service
COPY .  /home/Service
RUN npm install 
EXPOSE 8888
CMD npm start 
```

最后执行`sudo docker build -t mynodeapp .`生成dockerfile镜像文件

PS:

FROM是构建镜像的基础源镜像,hub.c.163.com/nce2/nodejs:0.12.2是镜像名,本地不存在images,会去docker仓库拉取

RUN  mkdir -p /home/Service 是指在容器中创建一个在/home/Service/目录下运行的程序目录

WORKDIR 是指容器的运行目录

COPY 是指将docker外的文件复制到容器的指定目录下

EXPOSE 是指将容器的某个端口导出给当前虚拟机，用于外部应用访问docker

CMD是指每次启动docker时执行的命令

### 23)运行打包好的dockerfile镜像文件(部署合约)

```
sudo docker run -d -p 8880:8888 mynodeapp
```

### 24)测试运行后的镜像

终端输入`curl -i localhost:8880`

浏览器输入`localhost:88880`

报错:curl: (7) Failed to connect to localhost port 8880: 拒绝连接

解决办法:先查看8880端口是否被占用，执行`lsof -i:8888`,终端显示没被占用,继续执行`sudo docker ps`,查看镜像是否在运行,mynodeapp镜像没有在运行,再执行`sudo docker ps -a`,继续查看运行的状态,很明显运行后就退出了,那么执行`sudo docker logs CONTAINER ID(mynodeapp的 CONTAINER ID)`，终端就可以打印报错的问题



## swtc公链交互测试api

### 25)安装SWTC公链库

```
npm install --save @swtc/lib
```

### 26)@swtc/lib库与swtclib-app接口测试与井通公链交互

#### 1.创建连接获取服务器基础信息

#### @swtc/lib

执行`npm install --save request`

再执行`touch server2.js`

添加如下代码到server2.js中

```
var jlib = require('@swtc/lib');
//Remote类是井通底层交互最主要的类，它可以组装交易发送到底层、订阅事件及从底层拉取数据
var Remote = jlib.Remote;
//创建remote对象
//issuer是默认银关,server是井通底层服务地址
var remote = new Remote({server: 'ws://ts5.jingtum.com:5030', issuer: 'jBciDE8Q3uJjf111VeiUNM775AMKHEbBLS'});
//创建连接
remote.connectPromise()
	.then( server_info => {
		console.log(server_info)
		remote.disconnect()
	})
	.catch(console.error)
```

终端执行`node server2.js`

终端返回的结果信息:

```
{
  fee_base: 10,
  fee_ref: 10,
  hostid: 'WALE',
  ledger_hash: '76C1B00890CF64D52DD746C436CFFEEE3AF7DDC8D89636CA3CC24FCE78F25C2C',
  ledger_index: 5648809,
  ledger_time: 635572140,
  load_base: 256,
  load_factor: 256,
  pubkey_node: 'n9KFgztij6QLsCk4AqDFteyJRJjMFRWV85h75wpaohRm6wVNRmDS',
  random: '393A7C6578F71E864D29878983FF4FC078FBF87DB645F37B59D2DDACE3709BE4',
  reserve_base: 10000000,
  reserve_inc: 1000000,
  server_status: 'full',
  validated_ledgers: '2-5543287,5543478-5554484,5554549-5554591,5554662-5573588,5573969-5585157,5585163-5647296,5647377-5648809'
}
```



#### swtclib-app形式的restful api

执行`npm install --save request`

再执行`touch server2.js`

添加如下代码到server2.js中

```
var request = require('request');
const url='http://swtclib-app.jingtumzs.com';
request(`${url}/server/info`, (err, res, body)=>{
  if (!err && res.statusCode == 200) {
    console.log(body);
  }
})
```

终端执行`node server2.js`

终端返回的结果信息:

```
{"success":true,"msg":"成功","code":0,"data":{"fee_base":10,"fee_ref":10,"hostid":"PET","ledger_hash":"782183CB6E325B075C702DE0ABE4B9A0DE6F5094295DD9CF194EF71968E68435","ledger_index":15336853,"ledger_time":636529830,"load_base":256,"load_factor":256,"pubkey_node":"n9M4oEaMGxjWsyMtp9sYAGgZbjoC4W7cETbTDJrUuUHv9KYU9ALb","random":"6040174A8ECF71A50A0F4051210BD6FF447EF64A54FD699DCFC0BEDE954F5EA4","reserve_base":20000000,"reserve_inc":5000000,"server_status":"full","validated_ledgers":"266955-15336853"}}
```



#### 2.请求底层服务器节点信息

#### @swtc/lib

执行`touch server3.js`

添加如下代码到server3.js中

```
var jlib = require('@swtc/lib');
var Remote = jlib.Remote;
//创建remote对象
var remote = new Remote({server: 'ws://ts5.jingtum.com:5030', issuer: 'jBciDE8Q3uJjf111VeiUNM775AMKHEbBLS'});
//连接底层
remote.connectPromise()
	.then(async () => { 
			let response = await remote.requestServerInfo().submitPromise()
			console.log(response)
			remote.disconnect()
		}
	)
	.catch(console.error)
```

终端执行`node server3.js`

终端返回的结果信息:

```
{
  complete_ledgers: '2-5543287,5543478-5554484,5554549-5554591,5554662-5573588,5573969-5585157,5585163-5647296,5647377-5648809',
  ledger: '76C1B00890CF64D52DD746C436CFFEEE3AF7DDC8D89636CA3CC24FCE78F25C2C',
  public_key: 'n9KFgztij6QLsCk4AqDFteyJRJjMFRWV85h75wpaohRm6wVNRmDS',
  state: 'full   1897:11:42',
  peers: 2,
  version: 'skywelld-0.29.60'
}
```



#### swtclib-app形式的restful api

执行`touch server3.js`

添加如下代码到server3.js中

```
var request = require('request');
const url='http://swtclib-app.jingtumzs.com';
request(`${url}/server/node`, (err, res, body)=>{
  if (!err && res.statusCode == 200) {
    console.log(body);
  }
})
```

终端执行`node server3.js`

终端返回的结果信息:

```
{"success":true,"msg":"成功","code":0,"data":{"complete_ledgers":"266955-15336879","ledger":"B8BD26F97CD392A5802126381B51AB00C5DE4E7218F2D6A59ADEFACFEDA9FE5F","public_key":"n9M4oEaMGxjWsyMtp9sYAGgZbjoC4W7cETbTDJrUuUHv9KYU9ALb","state":"full   91:01:43","peers":32,"version":"skywelld-0.28.1"}}
```



#### 3.创建钱包

#### @swtc/lib

```
/创建Wallet对象
var jlib = require('@swtc/lib');
var Wallet = jlib.Wallet;
var w1 = Wallet.generate();
console.log(w1);
```

返回的结果信息:

````
{
  secret: 'sscu4fQGJ3g3BeYiwhQ3DBBoJHaAQ',
  address: 'jnL3UL2qn2TD88z8S6WXjqZtBWWwHc6Mrt'
}
````

secret是井通钱包私玥

address是井通钱包地址



#### swtclib-app形式的restful api

执行`touch server4.js`

添加如下代码到server4.js中

```
var request = require('request');
const url='http://swtclib-app.jingtumzs.com';
request(`${url}/wallet/generate`, (err, res, body)=> {
  if (!err && res.statusCode == 200) {
    console.log(body);
  }
})
```

终端执行`node server4.js`

终端返回的结果信息:

```
{"success":true,"msg":"成功","code":0,"data":{"secret":"spyHfKQxpMdtXE8s9tsf7EYqD3o9B","address":"jJHUNxhxHVaNhyQSXuE5J3tbzGGt2e87Z7"}
}
```



#### 4.根据私钥创建钱包

#### @swtc/lib

执行`touch server5.js`

添加如下代码到server5.js中

```
var jlib = require('@swtc/lib');
var Wallet = jlib.Wallet;
var w2 = Wallet.fromSecret('spyHfKQxpMdtXE8s9tsf7EYqD3o9B');
console.log(w2);
```

终端执行`node server5.js`

终端返回的结果信息:

```
{
  secret: 'spyHfKQxpMdtXE8s9tsf7EYqD3o9B',
  address: 'jJHUNxhxHVaNhyQSXuE5J3tbzGGt2e87Z7'
}
```



#### swtclib-app形式的restful api

执行`touch server5.js`

添加如下代码到server5.js中

```
var request = require('request');
const url='http://swtclib-app.jingtumzs.com';
var requestData = {"secret":"spyHfKQxpMdtXE8s9tsf7EYqD3o9B","rsa":"false"};
request({
    url: `${url}/wallet/generate`,
    method: "POST",
    json: true,
    headers: {
        "content-type": "application/json",
    },
    body:requestData
}, (err,res,body)=>{
    if (!err && res.statusCode == 200) {
          console.log(body);
    }
});
```

终端执行`node server5.js`

终端返回的结果信息:

```
{
  success: true,
  msg: '成功',
  code: 0,
  data: {
    secret: 'spyHfKQxpMdtXE8s9tsf7EYqD3o9B',
    address: 'jJHUNxhxHVaNhyQSXuE5J3tbzGGt2e87Z7'
  }
}
```



#### <!--5-->.获取账号信息

#### @swtc/lib

执行`touch server6.js`

添加如下代码到server6.js中

```
var jlib = require('@swtc/lib');
var Remote = jlib.Remote;
var remote = new Remote({server: 'ws://10.13.0.90:5020', issuer: 'jBciDE8Q3uJjf111VeiUNM775AMKHEbBLS'});
remote.connectPromise()
    .then(async () => {
    		let options = {account: 'j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9'};
    		let req = remote.requestAccountInfo(options);
            let response = await req.submitPromise()
            console.log(response)
            remote.disconnect()
        }
    )
    .catch(console.error)
```

终端执行`node server6.js`

终端返回的结果信息:

```
InsufficientNetworkMode
```





#### swtclib-app形式的restful api

执行`touch server6.js`

添加如下代码到server6.js中

```
var request = require('request');
const url = 'http://swtclib-app.jingtumzs.com';
var address = "j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9";
request(`${url}/account/${address}/info`, (err, res, body)=> {
  if (!err && res.statusCode == 200) {
    console.log(body);
  }
})
```

终端执行`node server6.js`

终端返回的结果信息:

```
{"success":true,"msg":"成功","code":0,"data":{"account_data":{"Account":"j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9","Balance":"50000000","Flags":0,"LedgerEntryType":"AccountRoot","OwnerCount":0,"PreviousTxnID":"4B37D6E7B88354199DD49216448BB5C490050CDAC830D1E52DB8E5CFDD26BB4F","PreviousTxnLgrSeq":15336229,"Sequence":1,"index":"3636E63C0105B82E4B00FDFDDC22FA6D3BAB93B5D684C3C24A927420597CF3BE"},"ledger_hash":"90405A3D482FCA885D732DE8C8044D565367A8DED3DE5FB64BC7EF745949DBE3","ledger_index":15337175,"validated":true}}
```



#### <!--6-->.请求账户余额信息

#### @swtc/lib

执行`touch server7.js`

添加如下代码到server7.js中

```
var jlib = require('@swtc/lib');
var Remote = jlib.Remote;
var remote = new Remote({server: 'ws://ts5.jingtum.com:5030', issuer: 'jBciDE8Q3uJjf111VeiUNM775AMKHEbBLS'});
remote.connectPromise()
    .then(async () => {
    		let options = {account: 'j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9'};
    		let req = remote.requestAccountInfo(options);
            let response = await req.submitPromise()
            console.log(response)
            remote.disconnect()
        }
    )
    .catch(console.error)
```

终端执行`node server7.js`

终端返回的结果信息:

```
InsufficientNetworkMode
```



#### swtclib-app形式的restful api

执行`touch server7.js`

添加如下代码到server7.js中

```
var request = require('request');
const url = 'http://swtclib-app.jingtumzs.com';
var address = "j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9";
request(`${url}/account/${address}/balances`, (err, res, body)=> {
  if (!err && res.statusCode == 200) {
    console.log(body);
  }
})
```

终端执行`node server7.js`

终端返回的结果信息:

```
{"success":true,"msg":"成功","code":0,"data":{"balances":[{"value":"50.000000","currency":"SWT","issuer":"","freezed":"20.000000"}],"sequence":1}}
```



#### <!--7-->.获得账号交易列表 

#### @swtc/lib







#### swtclib-app形式的restful api

执行`touch server8.js`

添加如下代码到server8.js中

```
var request = require('request');
const url = 'http://swtclib-app.jingtumzs.com';
var address = "j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9";
request(`${url}/account/${address}/tx`, (err, res, body)=> {
  if (!err && res.statusCode == 200) {
    console.log(body);
  }
})
```

终端执行`node server8.js`

终端返回的结果信息:

```
{"success":true,"msg":"获取交易列表成功","code":0,"data":{"account":"j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9","ledger_index_max":15337234,"ledger_index_min":266955,"limit":20,"transactions":[{"date":1583208390,"hash":"4B37D6E7B88354199DD49216448BB5C490050CDAC830D1E52DB8E5CFDD26BB4F","type":"received","fee":"0.01","result":"tesSUCCESS","memos":[{"MemoData":"888"}],"counterparty":"jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH","amount":{"value":"50","currency":"SWT","issuer":""},"effects":[],"balances":{"SWT":50},"balancesPrev":{"SWT":0}}]}}
```



#### 8.获取最新关闭的账本信息

#### @swtc/lib

执行`touch server10.js`

添加如下代码到server10.js中

```
var jlib = require('@swtc/lib');
var Remote = jlib.Remote;
var remote = new Remote({server: 'ws://ts5.jingtum.com:5030', issuer: 'jBciDE8Q3uJjf111VeiUNM775AMKHEbBLS'});
remote.connectPromise()
	.then(async () => { 
			let response = await remote.requestLedgerClosed().submitPromise()
			console.log(response)
			remote.disconnect()
		}
	)
	.catch(console.error)
```

终端执行`node server8.js`

终端返回的结果信息:

```
{
  ledger_hash: '4089E7AEE8A043F2CFB71F4496EFA4968D89552AC66DED2B31D18DCD1897D764',
  ledger_index: 5753204
}
```



#### swtclib-app形式的restful api

执行`touch server9.js`

添加如下代码到server9.js中

```
var request = require('request');
const url = 'http://swtclib-app.jingtumzs.com';
request(`${url}/ledgers/closed`, (err, res, body)=> {
  if (!err && res.statusCode == 200) {
    console.log(body);
  }
})
```

终端执行`node server9.js`

终端返回的结果信息:

```
{"success":true,"msg":"成功","code":0,"data":{"ledger_hash":"E0BF8A3690816FC10D0DD5DB5252DA78998D806A0BC73AEA5DB48A687B4FA14B","ledger_index":15337289}}
```



#### <!--9-->.根据hash获取某一账本具体信息 

#### @swtc/lib



#### swtclib-app形式的restful api

执行`touch server10.js`

添加如下代码到server10.js中

```
var request = require('request');
const url = 'http://swtclib-app.jingtumzs.com';
var hash = 'E0BF8A3690816FC10D0DD5DB5252DA78998D806A0BC73AEA5DB48A687B4FA14B';
request(`${url}/ledgers/hash/${hash}`, (err, res, body)=> {
  if (!err && res.statusCode == 200) {
    console.log(body);
  }
})
```

终端执行`node server10.js`

终端返回的结果信息:

```
{"success":true,"msg":"成功","code":0,"data":{"accepted":true,"account_hash":"EBD390005516886A58179BAE7DF7B164963BBC9A7846C78B7FAF4CC0B558D197","close_time":636534190,"close_time_human":"2020-Mar-03 07:03:10","close_time_resolution":10,"closed":true,"hash":"E0BF8A3690816FC10D0DD5DB5252DA78998D806A0BC73AEA5DB48A687B4FA14B","ledger_hash":"E0BF8A3690816FC10D0DD5DB5252DA78998D806A0BC73AEA5DB48A687B4FA14B","ledger_index":"15337289","parent_hash":"CF47013AB0D34D39F3CACDEE12919111E530065DF6A72B6126CA8A544590715D","seqNum":"15337289","totalCoins":"599999999999460713","total_coins":"599999999999460713","transaction_hash":"B0D3F9B6880604C059AEB08E33048B16DC6D6AC4A595501ACF0983BA3778A214"}}
```



#### 10.根据账本高度获取某一账本具体信息

#### @swtc/lib

执行`touch server11.js`

添加如下代码到server11.js中

```
var jlib = require('@swtc/lib');
var Remote = jlib.Remote;
var remote = new Remote({server: 'ws://ts5.jingtum.com:5030', issuer: 'jBciDE8Q3uJjf111VeiUNM775AMKHEbBLS'});
remote.connectPromise()
	.then(async () => { 
			let response = await remote.requestLedger({
					ledger_index: '2838718',
					transactions: true
				}).submitPromise()
			console.log(response)
			remote.disconnect()
		}
	)
	.catch(console.error)
```

终端执行`node server11.js`

终端返回的结果信息:

```
{
  accepted: true,
  account_hash: '4E64CF69B07D71B5216D8F9D8030D9D73958B34550A30FA7AC5894FF418FF9D4',
  close_time: 607471210,
  close_time_human: '2019-Apr-01 22:00:10',
  close_time_resolution: 10,
  closed: true,
  hash: '93D6C3B76B5D6A2637F92F88A8CFB42C8433DA0EE69BD08A8CFAC327571173DD',
  ledger_hash: '93D6C3B76B5D6A2637F92F88A8CFB42C8433DA0EE69BD08A8CFAC327571173DD',
  ledger_index: '2838718',
  parent_hash: '71CE1471C329AB64CDEF40C17484317760BA7C2DFFC731AE187AF0318BA6E20A',
  seqNum: '2838718',
  totalCoins: '600000000000000000',
  total_coins: '600000000000000000',
  transaction_hash: '0000000000000000000000000000000000000000000000000000000000000000',
  transactions: []
}
```



#### swtclib-app形式的restful api

执行`touch server11.js`

添加如下代码到server11.js中

```
var request = require('request');
const url = 'http://swtclib-app.jingtumzs.com';
request(`${url}/ledgers/index/15337289`, (err, res, body)=> {
  if (!err && res.statusCode == 200) {
    console.log(body);
  }
})
```

终端执行`node server11.js`

终端返回的结果信息:

```
{"success":true,"msg":"成功","code":0,"data":{"accepted":true,"account_hash":"EBD390005516886A58179BAE7DF7B164963BBC9A7846C78B7FAF4CC0B558D197","close_time":636534190,"close_time_human":"2020-Mar-03 07:03:10","close_time_resolution":10,"closed":true,"hash":"E0BF8A3690816FC10D0DD5DB5252DA78998D806A0BC73AEA5DB48A687B4FA14B","ledger_hash":"E0BF8A3690816FC10D0DD5DB5252DA78998D806A0BC73AEA5DB48A687B4FA14B","ledger_index":"15337289","parent_hash":"CF47013AB0D34D39F3CACDEE12919111E530065DF6A72B6126CA8A544590715D","seqNum":"15337289","totalCoins":"599999999999460713","total_coins":"599999999999460713","transaction_hash":"B0D3F9B6880604C059AEB08E33048B16DC6D6AC4A595501ACF0983BA3778A214"}}
```



#### <!--11-->.单笔转账

**转账前提:钱包地址需要激活,才能进行转账,转账成功才会报"engine_result": "tesSUCCESS"**

#### @swtc/lib

执行`touch server12.js`

添加如下代码到server12.js中

```
var jlib = require('@swtc/lib');
var Remote = jlib.Remote;
var remote = new Remote({server: 'ws://ts5.jingtum.com:5030', issuer: 'jBciDE8Q3uJjf111VeiUNM775AMKHEbBLS'});
remote.connectPromise()
    .then(async () => {
   		     let tx = remote.buildPaymentTx({
   		         account: 'j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9',
   		         to: 'jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH',
   		         amount: remote.makeAmount(10000)
   		     });
            let response = await tx.submitPromise('ssmNtj6a48FJEN3JZqaSGxVndXywi', '给支付')
            console.log(response)
            remote.disconnect()
        }
    )
    .catch(console.error)
```

终端执行`node server12.js`

终端返回的结果信息:

```
InsufficientNetworkMode
```





#### swtclib-app形式的restful api

执行`touch server12.js`

添加如下代码到server12.js中

```
var request = require('request');
const url = 'http://swtclib-app.jingtumzs.com';
var requestData = {
 "account":"j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9",
 "to":"jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH",
 "value":"0.1",
 "currency":"SWT",
 "issuer":"",
 "secret":"ssmNtj6a48FJEN3JZqaSGxVndXywi",
 "addMemo":"xhh测试单笔支付"
};
request({
    url: `${url}/tx/pay`,
    method: "POST",
    json: true,
    headers: {
        "content-type": "application/json",
    },
    body:requestData
}, (err,res,body)=>{
    if (!err && res.statusCode == 200) {
          console.log(body);
    }
});
```

终端执行`node server12.js`

终端返回的结果信息:

```
{
  success: true,
  msg: '请求成功',
  code: 0,
  data: {
    engine_result: 'tesSUCCESS',
    engine_result_code: 0,
    engine_result_message: 'The transaction was applied. Only final in a validated ledger.',
    tx_blob: '120000220000000024000000036140000000000186A0684000000000002710732102BE3719EA0BD52FC365FA84CE675276F14991717C9B1F4E58FC2AD9CDCCA9BF5774473045022100A91765442707E35CBF4113F46AEE55CCC077FEBEC70B8907DB923593C3D808FA0220376601BF4D959B6927A6E45C1B8F10CECE97797096677EB5C26156B876B5A2628114EBECD56515030FD1DBFCE1FCF3BC17DA15B504DE83144811B4F748718DED78C4B946AD3ABFEC8746FB05F9EA7D15786868E6B58BE8AF95E58D95E7AC94E694AFE4BB98E1F1',
    tx_json: {
      Account: 'j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9',
      Amount: '100000',
      Destination: 'jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH',
      Fee: '10000',
      Flags: 0,
      Memos: [Array],
      Sequence: 3,
      SigningPubKey: '02BE3719EA0BD52FC365FA84CE675276F14991717C9B1F4E58FC2AD9CDCCA9BF57',
      TransactionType: 'Payment',
      TxnSignature: '3045022100A91765442707E35CBF4113F46AEE55CCC077FEBEC70B8907DB923593C3D808FA0220376601BF4D959B6927A6E45C1B8F10CECE97797096677EB5C26156B876B5A262',
      hash: '64885C36213A0821041D7AC7B7FD49D4B1588033106173A18B7239BC9EF1369A'
    }
  }
}
```



#### <!--12-->.批量转账

#### @swtc/lib



#### swtclib-app形式的restful api

执行`touch server13.js`

添加如下代码到server13.js中

```
var request = require('request');
const url = 'http://swtclib-app.jingtumzs.com';
var requestData = {
 "account":"j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9",
 "secret":"ssmNtj6a48FJEN3JZqaSGxVndXywi",
 "rsa":"false",
 "tx":[
 {
 "to":"jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH",
 "value":"0.1",
 "currency":"SWT",
 "issuer":" ",
 "addMemo":"测试1"
 },
 {
 "to":"j4D8AqnwUFhfhRtco8Cq4R547m2su8au5r",
 "value":"0.1",
 "currency":"SWT",
 "issuer":" ",
 "addMemo":"测试2"
 },
 {
 "to":"jQJLeTeqayDz2W44viDEaoncH6VZ9zJPcP",
 "value":"0.1",
 "currency":"SWT",
 "issuer":" ",
 "addMemo":"测试3"
 }
 ]
};
request({
    url: `${url}/tx/batch`,
    method: "POST",
    json: true,
    headers: {
        "content-type": "application/json",
    },
    body:requestData
}, (err,res,body)=>{
    if (!err && res.statusCode == 200) {
          console.log(body);
    }
});
```

终端执行`node server13.js`

终端返回的结果信息:

```
{
  success: true,
  msg: '请求成功',
  code: 0,
  data: [
    {
      success: true,
      msg: '连接成功,交易结果为tesSUCCESS',
      index: '0',
      data: [Object]
    },
    {
      success: true,
      msg: '连接成功,交易结果为tesSUCCESS',
      index: '1',
      data: [Object]
    },
    {
      success: true,
      msg: '连接成功,交易结果为tesSUCCESS',
      index: '2',
      data: [Object]
    }
  ]
}
```



#### <!--13-->.签名转账

#### @swtc/lib



#### swtclib-app形式的restful api

前提:私玥暴露在公网上有安全性问题,可以本地签名,或者说离线签名,然后将签名后的信息,在公网上推送消息到链上广播,这样是很安全的方法

执行`touch server14.js`

添加如下代码到server14.js中

```
var request = require('request');
const url = 'http://swtclib-app.jingtumzs.com';
var requestData = {
 "account":"j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9",
 "to":"jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH",
 "value":"0.2",
 "currency":"SWT",
 "issuer":" ",
 "secret":"ssmNtj6a48FJEN3JZqaSGxVndXywi",
 "addMemo":"测试签名",
 "rsa":"false"
};
request({
    url: `${url}/sign/pay`,
    method: "POST",
    json: true,
    headers: {
        "content-type": "application/json",
    },
    body:requestData
}, (err,res,body)=>{
    if (!err && res.statusCode == 200) {
         // console.log(body);
          request({
            url: `${url}/tx/blob`,
            method: "POST",
            json: true,
            headers: {
                "content-type": "application/json",
            },
            body:{
                "blob":body.data
            }
        },function(err,res,body){
            if (!err && res.statusCode == 200) {
                  console.log(body);
            }
})
    }
});
```

**ps:先签名交易，然后发送签名后的交易**

终端执行`node server14.js`

终端返回的结果信息:

```
{
  success: true,
  msg: '请求成功',
  code: 0,
  data: {
    engine_result: 'tesSUCCESS',
    engine_result_code: 0,
    engine_result_message: 'The transaction was applied. Only final in a validated ledger.',
    tx_blob: '1200002200000000240000000A614000000000030D40684000000000002710732102BE3719EA0BD52FC365FA84CE675276F14991717C9B1F4E58FC2AD9CDCCA9BF577446304402204283050EA05B22044193BAEEB118E93F8CDB66100E3EC12740B8C397534ACC590220313AFFDAFB0EF171B820FA5A14AD4C600494290CBDCE29367F5A236F1D6ADCE98114EBECD56515030FD1DBFCE1FCF3BC17DA15B504DE83144811B4F748718DED78C4B946AD3ABFEC8746FB05F9EA7D0CE6B58BE8AF95E7ADBEE5908DE1F1',
    tx_json: {
      Account: 'j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9',
      Amount: '200000',
      Destination: 'jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH',
      Fee: '10000',
      Flags: 0,
      Memos: [Array],
      Sequence: 10,
      SigningPubKey: '02BE3719EA0BD52FC365FA84CE675276F14991717C9B1F4E58FC2AD9CDCCA9BF57',
      TransactionType: 'Payment',
      TxnSignature: '304402204283050EA05B22044193BAEEB118E93F8CDB66100E3EC12740B8C397534ACC590220313AFFDAFB0EF171B820FA5A14AD4C600494290CBDCE29367F5A236F1D6ADCE9',
      hash: 'EDCEA7D56775A6F2E664148848D8CD54C724335A9330DFB23880E5762D595C6A'
    }
  }
```



**第二种方法**

示例代码

```
var request = require('request');
const url = 'http://swtclib-app.jingtumzs.com';
var requestData = {
 "account":"j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9",
 "to":"jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH",
 "value":"0.2",
 "currency":"SWT",
 "issuer":" ",
 "secret":"ssmNtj6a48FJEN3JZqaSGxVndXywi",
 "addMemo":"测试签名",
 "rsa":"false"
};

async function getSignData(){
	return new Promise((resolve,reject)=>{
		request({
		    url: `${url}/sign/pay`,
		    method: "POST",
		    json: true,
		    headers: {
		        "content-type": "application/json",
		    },
		    body:requestData
		}, (err,res,body)=>{
			if (!err && res.statusCode == 200) {
				resolve(body);
			}else{
				reject(err);
			}
		})
	})
};

function sendTrans(data){
		request({
			    url: `${url}/tx/blob`,
			    method: "POST",
			    json: true,
			    headers: {
			        "content-type": "application/json",
			    },
			    body:{
        			"blob":data
    			}
			}, (err,res,body)=>{
				if (!err && res.statusCode == 200) {
					console.log(body);
				}			
			})
};

async function main(){
	var mydata = await getSignData();
	sendTrans(mydata.data);
};

main();
```

终端打印的结果

```
{
  success: true,
  msg: '请求成功',
  code: 0,
  data: {
    engine_result: 'tesSUCCESS',
    engine_result_code: 0,
    engine_result_message: 'The transaction was applied. Only final in a validated ledger.',
    tx_blob: '1200002200000000240000000F614000000000030D40684000000000002710732102BE3719EA0BD52FC365FA84CE675276F14991717C9B1F4E58FC2AD9CDCCA9BF57744630440220609C2D135A87BB114BDA23E5E6AD1C08AB260640AF950F20A70D217BBE5989DF02204E02B72D66BB125B9CD04AA2080717552C56F9DB04AB435DBD2ADC27FF24CEA78114EBECD56515030FD1DBFCE1FCF3BC17DA15B504DE83144811B4F748718DED78C4B946AD3ABFEC8746FB05F9EA7D0CE6B58BE8AF95E7ADBEE5908DE1F1',
    tx_json: {
      Account: 'j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9',
      Amount: '200000',
      Destination: 'jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH',
      Fee: '10000',
      Flags: 0,
      Memos: [Array],
      Sequence: 15,
      SigningPubKey: '02BE3719EA0BD52FC365FA84CE675276F14991717C9B1F4E58FC2AD9CDCCA9BF57',
      TransactionType: 'Payment',
      TxnSignature: '30440220609C2D135A87BB114BDA23E5E6AD1C08AB260640AF950F20A70D217BBE5989DF02204E02B72D66BB125B9CD04AA2080717552C56F9DB04AB435DBD2ADC27FF24CEA7',
      hash: '080408C89D961BF587BA2B69CFA7181E44206306A02DD05DC4C6F500CF52EAA6'
    }
  }
}
```



**第三种方法**

示例代码

```
var request = require('request');
const url = 'http://swtclib-app.jingtumzs.com';
var requestData = {
 "account":"j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9",
 "to":"jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH",
 "value":"0.4",
 "currency":"SWT",
 "issuer":" ",
 "secret":"ssmNtj6a48FJEN3JZqaSGxVndXywi",
 "addMemo":"测试签名",
 "rsa":"false"
};

async function getSignData(){
	return new Promise((resolve,reject)=>{
		request({
		    url: `${url}/sign/pay`,
		    method: "POST",
		    json: true,
		    headers: {
		        "content-type": "application/json",
		    },
		    body:requestData
		}, (err,res,body)=>{
			if (!err && res.statusCode == 200) {
				resolve(body);
			}else{
				reject(err);
			}
		})
	})
};

function sendTrans(data){
	request({
			url: `${url}/tx/blob`,
			method: "POST",
			json: true,
			headers: {
			        "content-type": "application/json",
			},
			body:{
        			"blob":data
    	    }
			}, (err,res,body)=>{
				if (!err && res.statusCode == 200) {
					console.log(body);
			}				
	})
};

var p = getSignData();
p.then(data=>{
 	sendTrans(data.data);
 })
.catch(err=>{
 	console.log(err);
 })
```

终端打印的结果

```
{
  success: true,
  msg: '请求成功',
  code: 0,
  data: {
    engine_result: 'tesSUCCESS',
    engine_result_code: 0,
    engine_result_message: 'The transaction was applied. Only final in a validated ledger.',
    tx_blob: '12000022000000002400000011614000000000061A80684000000000002710732102BE3719EA0BD52FC365FA84CE675276F14991717C9B1F4E58FC2AD9CDCCA9BF5774473045022100D3893A31DC175A44E97ECF2BD348D4DD2EC56A84A9339B67AE34CA67C8E184EB02204AEDC8D8FE0A6E57F5188B1E64B2E19082972BCE548768E2E8CD104AC15297378114EBECD56515030FD1DBFCE1FCF3BC17DA15B504DE83144811B4F748718DED78C4B946AD3ABFEC8746FB05F9EA7D0CE6B58BE8AF95E7ADBEE5908DE1F1',
    tx_json: {
      Account: 'j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9',
      Amount: '400000',
      Destination: 'jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH',
      Fee: '10000',
      Flags: 0,
      Memos: [Array],
      Sequence: 17,
      SigningPubKey: '02BE3719EA0BD52FC365FA84CE675276F14991717C9B1F4E58FC2AD9CDCCA9BF57',
      TransactionType: 'Payment',
      TxnSignature: '3045022100D3893A31DC175A44E97ECF2BD348D4DD2EC56A84A9339B67AE34CA67C8E184EB02204AEDC8D8FE0A6E57F5188B1E64B2E19082972BCE548768E2E8CD104AC1529737',
      hash: '4DBFFC6F4D15E8D333F0D93A5A8FEEC5F14C306C15B9812A68C8B9CD8B03A73C'
    }
  }
}
```



**第四种方法**

执行`touch server14.js`

执行`npm install node-fetch --save`

添加如下代码到server14.js中

```
const fetch = require("node-fetch");
const url = 'http://swtclib-app.jingtumzs.com';
var requestData = {
 "account":"j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9",
 "to":"jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH",
 "value":"0.9",
 "currency":"SWT",
 "issuer":" ",
 "secret":"ssmNtj6a48FJEN3JZqaSGxVndXywi",
 "addMemo":"测试签名",
 "rsa":"false"
};
fetch(`${url}/sign/pay`, {
  method: 'POST',
  body: JSON.stringify(requestData), // data can be `string` or {object}!
  headers: {
    'Content-Type': 'application/json'
  }
}).then(res => res.json())
.catch(error => console.error('Error:', error))
.then(response => fetch(`${url}/tx/blob`,{
      method: 'POST',
      body: JSON.stringify({
                        "blob":response.data
                }), 
      headers: { 
        'Content-Type': 'application/json'
      }
      }).then(res => res.json())
    .catch(error => console.error('Error:', error))
    .then(response =>console.log(response))
);
```

终端打印的结果

```
{
  success: true,
  msg: '请求成功',
  code: 0,
  data: {
    engine_result: 'tesSUCCESS',
    engine_result_code: 0,
    engine_result_message: 'The transaction was applied. Only final in a validated ledger.',
    tx_blob: '120000220000000024000000126140000000000DBBA0684000000000002710732102BE3719EA0BD52FC365FA84CE675276F14991717C9B1F4E58FC2AD9CDCCA9BF57744630440220737D522D3B18CD65E6124E448026B3D0FEDE5222895395FA68FB9B298FC174E40220580F341F80AA62E1E17A6B59D57AE2942948EE4F0A4822C53C8C56A5CFB99E9E8114EBECD56515030FD1DBFCE1FCF3BC17DA15B504DE83144811B4F748718DED78C4B946AD3ABFEC8746FB05F9EA7D0CE6B58BE8AF95E7ADBEE5908DE1F1',
    tx_json: {
      Account: 'j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9',
      Amount: '900000',
      Destination: 'jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH',
      Fee: '10000',
      Flags: 0,
      Memos: [Array],
      Sequence: 18,
      SigningPubKey: '02BE3719EA0BD52FC365FA84CE675276F14991717C9B1F4E58FC2AD9CDCCA9BF57',
      TransactionType: 'Payment',
      TxnSignature: '30440220737D522D3B18CD65E6124E448026B3D0FEDE5222895395FA68FB9B298FC174E40220580F341F80AA62E1E17A6B59D57AE2942948EE4F0A4822C53C8C56A5CFB99E9E',
      hash: '6C7A3EFA0229AF620F71D489055B3607D265B3BB67417B8B2528597262797BD8'
    }
  }
}
```





#### <!--14-->.批量签名转账

#### @swtc/lib



#### swtclib-app形式的restful api

执行`touch server15.js`

添加如下代码到server15.js中

```
var request = require('request');
const url = 'http://swtclib-app.jingtumzs.com';
var requestData = {
 "account":"j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9",
 "secret":"ssmNtj6a48FJEN3JZqaSGxVndXywi",
 "rsa":"false",
 "tx":[
 {
 "to":"jpUCa7JwSbwvU1adNXRN7BWzTeVsTiNp1i",
 "value":"0.02",
 "currency":"SWT",
 "issuer":" ",
 "addMemo":"测试1"
 },
 {
 "to":"j4D8AqnwUFhfhRtco8Cq4R547m2su8au5r",
 "value":"0.02",
 "currency":"SWT",
 "issuer":" ",
 "addMemo":"测试2"
 },
 {
 "to":"jQJLeTeqayDz2W44viDEaoncH6VZ9zJPcP",
 "value":"0.02",
 "currency":"SWT",
 "issuer":" ",
 "addMemo":"测试3"
 }
 ]
};
request({
    url: `${url}/sign/batch`,
    method: "POST",
    json: true,
    headers: {
        "content-type": "application/json",
    },
    body:requestData
}, (err,res,body)=>{
    if (!err && res.statusCode == 200) {
         // console.log(body);
          request({
            url: `${url}/tx/batchblob`,
            method: "POST",
            json: true,
            headers: {
                "content-type": "application/json",
            },
            body:{
            "txBlob": [
                {
                    "blob":body.data[0]
                },
                {
                    "blob":body.data[1]
                },
                {
                    "blob":body.data[2]
                }
            ]
}},function(err,res,body){
    if (!err && res.statusCode == 200) {
          console.log(body);
    }
})
    }
});
```

终端执行`node server15.js`

终端返回的结果信息:

```
{
  success: true,
  msg: '请求成功',
  code: 0,
  data: [
    {
      success: true,
      msg: '连接成功,交易结果为tesSUCCESS',
      index: '0',
      data: [Object]
    },
    {
      success: true,
      msg: '连接成功,交易结果为tesSUCCESS',
      index: '1',
      data: [Object]
    },
    {
      success: true,
      msg: '连接成功,交易结果为tesSUCCESS',
      index: '2',
      data: [Object]
    }
  ]
}
```



#### <!--15-->. 查询某一交易具体信息

#### @swtc/lib

执行`touch server16.js`

添加如下代码到server16.js中

```
var jlib = require('@swtc/lib');
var Remote = jlib.Remote;
var remote = new Remote({server: 'ws://ts5.jingtum.com:5030', issuer: 'jBciDE8Q3uJjf111VeiUNM775AMKHEbBLS'});
remote.connectPromise()
	.then(async () => {
    		let req = remote.requestTx({hash: '4B37D6E7B88354199DD49216448BB5C490050CDAC830D1E52DB8E5CFDD26BB4F'});
			let response = await req.submitPromise()
			console.log(response)
			remote.disconnect()
		}
	)
	.catch(console.error)
```

终端执行`node server16.js`

终端返回的结果信息:

```
Current ledger is unavailable
```





#### swtclib-app形式的restful api

执行`touch server16.js`

添加如下代码到server16.js中

```
var request = require('request');
const url = 'http://swtclib-app.jingtumzs.com';
var hash = '64885C36213A0821041D7AC7B7FD49D4B1588033106173A18B7239BC9EF1369A';
request(`${url}/tx/${hash}`, (err, res, body)=>{
  if (!err && res.statusCode == 200) {
    console.log(body);
  }
})
```

终端执行`node server16.js`

终端返回的结果信息:

```
{"success":true,"msg":"成功","code":0,"data":{"Account":"j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9","Amount":"100000","Destination":"jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH","Fee":"10000","Flags":0,"Memos":[{"Memo":{"MemoData":"786868E6B58BE8AF95E58D95E7AC94E694AFE4BB98"}}],"Sequence":3,"SigningPubKey":"02BE3719EA0BD52FC365FA84CE675276F14991717C9B1F4E58FC2AD9CDCCA9BF57","TransactionType":"Payment","TxnSignature":"3045022100A91765442707E35CBF4113F46AEE55CCC077FEBEC70B8907DB923593C3D808FA0220376601BF4D959B6927A6E45C1B8F10CECE97797096677EB5C26156B876B5A262","date":636538380,"hash":"64885C36213A0821041D7AC7B7FD49D4B1588033106173A18B7239BC9EF1369A","inLedger":15337708,"ledger_index":15337708,"meta":{"AffectedNodes":[{"ModifiedNode":{"FinalFields":{"Account":"jEoSyfChhUMzpRDttAJXuie8XhqyoPBYvV","Balance":"636414612593","Flags":0,"OwnerCount":1,"Sequence":50784536},"LedgerEntryType":"AccountRoot","LedgerIndex":"109E80FB8CC6D82D4F7F7D77248C2C3C116ECCD4520B3D2A88421FFF94A57B1E","PreviousFields":{"Balance":"636414602593","Sequence":50784535},"PreviousTxnID":"8E51BFADB0ACDCD02BAC81219997A66F07BE2CC10F3F214BA85F610AA76FF456","PreviousTxnLgrSeq":15337707}},{"ModifiedNode":{"FinalFields":{"Account":"jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH","Balance":"35800000","Flags":0,"OwnerCount":0,"Sequence":31},"LedgerEntryType":"AccountRoot","LedgerIndex":"1E50C3D5C15CB32F986B65DF5354E2F7C987E7B58AEDDA3402CE72D7BF1475B7","PreviousFields":{"Balance":"35700000"},"PreviousTxnID":"2D5D938AD59D3A2C962581170355F41F2D3FE2A7D9F696309AB8FFFEB8E0D53D","PreviousTxnLgrSeq":15337660}},{"ModifiedNode":{"FinalFields":{"Account":"j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9","Balance":"39870000","Flags":0,"OwnerCount":0,"Sequence":4},"LedgerEntryType":"AccountRoot","LedgerIndex":"3636E63C0105B82E4B00FDFDDC22FA6D3BAB93B5D684C3C24A927420597CF3BE","PreviousFields":{"Balance":"39980000","Sequence":3},"PreviousTxnID":"2D5D938AD59D3A2C962581170355F41F2D3FE2A7D9F696309AB8FFFEB8E0D53D","PreviousTxnLgrSeq":15337660}}],"TransactionIndex":0,"TransactionResult":"tesSUCCESS"},"validated":true}}
```

















------

## 概述2

```
正式开发,系统用红帽，红帽系统如果未购买或订阅，就无法使用yum源安装软件,需要我们手动配置yum源,
以前未在红帽搭建node环境，故写一个搭建node环境的步骤
```

## 正式开发环境搭建

### 安装nodejs

#### 查看rhel版本

终端执行`cat /etc/redhat-release`,终端返回的结果

```
Red Hat Enterprise Linux Server release 7.7 (Maipo)
```

#### 查询已安装的yum

终端执行`rpm -qa | grep yum`

#### 卸载已安装的yum源

终端执行如下命令:

```
su root
rpm -qa | grep yum | xargs rpm -e --nodeps
```

#### 下载阿里镜像yum源rpm包

终端执行如下命令:

```
mkdir yumfile
cd yumfile
wget https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/python-urlgrabber-3.10-9.el7.noarch.rpm  
wget https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/yum-metadata-parser-1.1.4-10.el7.x86_64.rpm       
wget https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/yum-utils-1.1.31-52.el7.noarch.rpm
wget https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/yum-3.4.3-163.el7.centos.noarch.rpm      
wget https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/yum-plugin-fastestmirror-1.1.31-52.el7.noarch.rpm
```

#### 解压并安装rpm包

终端执行`rpm -ivh *.rpm  --force --nodeps`

#### 替换yum源

终端执行如下命令:

```
cd  /etc/yum.repos.d/   # 进入yum配置目录
wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo
#下载默认的配置文件
```

终端执行`vim /etc/yum.repos.d/CentOS-Base.repo `

打开配置文件后执行`:%s/$releasever/7/g ` 
终端执行`sed -i 's/gpgcheck=1/gpgcheck=0/g' /etc/yum.repos.d/CentOS-Base.repo`

```
# CentOS-Base.repo
#
# The mirror system uses the connecting IP address of the client and the
# update status of each mirror to pick mirrors that are updated to and
# geographically close to the client.  You should use this for CentOS updates
# unless you are manually picking other mirrors.
#
# If the mirrorlist= does not work for you, as a fall back you can try the 
# remarked out baseurl= line instead.
#
#
[base]
name=CentOS-7 - Base - mirrors.aliyun.com
failovermethod=priority
baseurl=http://mirrors.aliyun.com/centos/7/os/$basearch/
        http://mirrors.aliyuncs.com/centos/7/os/$basearch/
        http://mirrors.cloud.aliyuncs.com/centos/7/os/$basearch/
gpgcheck=1
gpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7
 
#released updates 
[updates]
name=CentOS-7 - Updates - mirrors.aliyun.com
failovermethod=priority
baseurl=http://mirrors.aliyun.com/centos/7/updates/$basearch/
        http://mirrors.aliyuncs.com/centos/7/updates/$basearch/
        http://mirrors.cloud.aliyuncs.com/centos/7/updates/$basearch/
gpgcheck=1
gpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7
 
#additional packages that may be useful
[extras]
name=CentOS-7 - Extras - mirrors.aliyun.com
failovermethod=priority
baseurl=http://mirrors.aliyun.com/centos/7/extras/$basearch/
        http://mirrors.aliyuncs.com/centos/7/extras/$basearch/
        http://mirrors.cloud.aliyuncs.com/centos/7/extras/$basearch/
gpgcheck=1
gpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7
 
#additional packages that extend functionality of existing packages
[centosplus]
name=CentOS-7 - Plus - mirrors.aliyun.com
failovermethod=priority
baseurl=http://mirrors.aliyun.com/centos/7/centosplus/$basearch/
        http://mirrors.aliyuncs.com/centos/7/centosplus/$basearch/
        http://mirrors.cloud.aliyuncs.com/centos/7/centosplus/$basearch/
gpgcheck=0
enabled=1
gpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7
```

#### 清除原缓存

终端执行`yum clean all`

*如果报错,failure: repodata/repomd.xml from rhelyum: [Errno 256] No more mirrors to try.*
*file:///media/repodata/repomd.xml: [Errno 14] curl#37 - "Couldn't open file /media/repodata/repomd.xml"*

*解决办法:``rm -rf /etc/yum.repos.d/rhel.repo*  `

说白了就是yum源配置有问题

#### 建立新缓存

终端执行`yum makecache`

#### 测试yum源的可用性

终端执行`yum repolist all`,终端返回结果如下打印：

```
                                                                                      状态
base/x86_64                                                                  CentOS-7 - Base - mirrors.aliyun.com                                                                启用: 10,097
centosplus/x86_64                                                            CentOS-7 - Plus - mirrors.aliyun.com                                                                禁用
contrib/x86_64                                                               CentOS-7 - Contrib - mirrors.aliyun.com                                                             禁用
extras/x86_64                                                                CentOS-7 - Extras - mirrors.aliyun.com                                                              启用:    335
updates/x86_64                                                               CentOS-7 - Updates - mirrors.aliyun.com                                                             启用:  1,487
repolist: 11,919
```

终端执行`vim /etc/yum.repos.d/CentOS-Base.repo `

ps:如果发现某个yum源的状态是disabled，则可以在CentOS7-Base-163.repo文件中进行更改，将相应模块的enabled参数更改为1就行了：

```
enabled=1
```

终端执行`yum repolist all`,终端返回结果必须如下打印：

```
                                                                                      状态
base/x86_64                                                                  CentOS-7 - Base - mirrors.aliyun.com                                                                启用: 10,097
centosplus/x86_64                                                            CentOS-7 - Plus - mirrors.aliyun.com                                                                启用:     80
extras/x86_64                                                                CentOS-7 - Extras - mirrors.aliyun.com                                                              启用:    335
updates/x86_64                                                               CentOS-7 - Updates - mirrors.aliyun.com                                                            启用:  1,487
repolist: 11,999
```

#### 更新yum

终端执行`yum update`

#### 安装相关依赖包

终端执行`yum install -y gcc-c++ make`

#### 添加NodeSource存储库

终端执行`curl -sL https://rpm.nodesource.com/setup_12.x | sudo -E bash -`

#### 安装Nodejs和NPM

终端执行`sudo yum install nodejs`

#### 查看node和npm版本

终端执行`node -v`

终端执行`npm -v`

### 

### 安装docker

#### 查看当前的内核版本

终端执行`uname -r`

ps:docker 要求 centos系统的内核版本高于等于 3.10 

#### 安装docker

终端执行

```
yum update -y
 yum -y install docker
```

#### 启动docker服务

终端执行`systemctl start docker`

#### 查看docker是否启动成功

终端执行`systemctl status docker`

终端返回如下所示才成成功

```
 docker.service - Docker Application Container Engine
   Loaded: loaded (/usr/lib/systemd/system/docker.service; disabled; vendor preset: disabled)
   Active: active (running) since 四 2020-03-12 10:14:04 CST; 5s ago
     Docs: http://docs.docker.com
 Main PID: 7773 (dockerd-current)
    Tasks: 24
   CGroup: /system.slice/docker.service
```

#### 测试docker

终端执行`docker search centos #搜索名字为centos的镜像`

终端执行`docker pull docker.io/centos #使用pull下载镜像，第一个是官方的镜像`

终端执行`docker run docker.io/centos echo "hello docker" #测试`







```
外网访问地址和端口                          内网访问地址和端口
183.62.200.201:5020                      10.13.0.90:5020            （websocket 接口）

183.62.200.201:5050                      10.13.0.90:5050            （RPC 接口）

183.62.200.201:5021                      10.13.0.103:5020          （websocket 接口）

183.62.200.201:5051                      10.13.0.103:5050          （RPC 接口）

restful api接口：http://10.13.0.90:7900/
restful api接口：http://10.13.0.103:7900/

接口说明
http://10.13.0.90:7900/doc/index.html
http://10.13.0.103:7900/doc/index.html
```



## 井通公链交互测试

#### 1.创建连接获取服务器基础信息

##### @swtc/lib

添加如下代码到test.js中

```
var jlib = require('@swtc/lib');
var Remote = jlib.Remote;
var remote = new Remote({server: 'ws://10.13.0.90:5020', issuer: 'jBciDE8Q3uJjf111VeiUNM775AMKHEbBLS'});
remote.connectPromise()
	.then( server_info => {
		console.log(server_info)
		remote.disconnect()
	})
	.catch(console.error)
```

终端执行`node test.js`

终端返回的结果信息:

```
{ fee_base: 10,
  fee_ref: 10,
  hostid: 'BATH',
  ledger_hash:
   'DFB9197A911BD5DA93B05E1DCA3A88E54DCC819B4AB49D858EA15F16A131DBAF',
  ledger_index: 15415719,
  ledger_time: 637318490,
  load_base: 256,
  load_factor: 256,
  pubkey_node: 'n9LSBmapXQzPRQkeeD6GXbnDVX7dUqyTe3rFEBfLkweWXwscHXot',
  random:
   'D9369947F206E3AD790F0617540308D8E677A48609F0DB887D509E31C1E47118',
  reserve_base: 20000000,
  reserve_inc: 5000000,
  server_status: 'full',
  validated_ledgers: '266955-15415719' }
```



##### swtclib-app形式的restful api

添加如下代码到test2.js中

```
const fetch = require("node-fetch");
const url='http://10.13.0.90:7900';
fetch(`${url}/server/info`)
    .then(res => res.json())
    .then(json => console.log(json));
```

终端执行`node test2.js`

终端返回的结果信息:

```
{ success: true,
  msg: '成功',
  code: 0,
  data:
   { fee_base: 10,
     fee_ref: 10,
     hostid: 'BATH',
     ledger_hash:
      '34843FDE9E4CDEAC9B94EA9C139B2E9018FB143488548B8B0204DD08814DFA1A',
     ledger_index: 15415817,
     ledger_time: 637319470,
     load_base: 256,
     load_factor: 256,
     pubkey_node: 'n9LSBmapXQzPRQkeeD6GXbnDVX7dUqyTe3rFEBfLkweWXwscHXot',
     random:
      'CCF9E7D57C9B15ECDFC4430CBEFF6A21D552B76DF37D1AAE0049D72740CC24A7',
     reserve_base: 20000000,
     reserve_inc: 5000000,
     server_status: 'full',
     validated_ledgers: '266955-15415817' 
   } 
}
```



#### 2.请求底层服务器节点信息

##### @swtc/lib

执行`touch test.js`

添加如下代码到test.js中

```
var jlib = require('@swtc/lib');
var Remote = jlib.Remote;
var remote = new Remote({server: 'ws://10.13.0.103:5020', issuer: 'jBciDE8Q3uJjf111VeiUNM775AMKHEbBLS'});
remote.connectPromise()
	.then(async () => { 
			let response = await remote.requestServerInfo().submitPromise()
			console.log(response)
			remote.disconnect()
		}
	)
	.catch(console.error)
```

终端执行`node test.js`

终端返回的结果信息:

```
{ complete_ledgers: '266955-15415837',
  ledger:
   '983170DC6504C4FAE1BF2327EAD7B606730BDA5907D5706F27731CE8B52B8172',
  public_key: 'n9J1HuhezyF3ZXWbTndyoS8XG6TeH38SF8jUDSxv9TiXbYyiGVdP',
  state: 'full   69:48:42',
  peers: 15,
  version: 'skywelld-0.28.1' 
  }
```



##### swtclib-app形式的restful api

添加如下代码到test2.js中

```
var request = require('request')
const url='http://10.13.0.103:7900'
async function getData(){
       return new Promise((resolve,reject)=>{
            request(`${url}/server/node`, (err, res, body)=>{
                        if (!err && res.statusCode == 200) {
                                     resolve(body)
                        }else{
                                     reject(err)
                        }
            })
        })
}
async function main(){
        console.log(await getData())
}
main()
```

终端执行`node test2.js`

终端返回的结果信息:

```
{"success":true,"msg":"成功","code":0,"data":{"complete_ledgers":"266955-15415941","ledger":"84937336E23D881095A30B3D80FF9DAB1FF47DB8B27EF0B402DCA1548DA7F89C","public_key":"n9J1HuhezyF3ZXWbTndyoS8XG6TeH38SF8jUDSxv9TiXbYyiGVdP","state":"full   70:06:01","peers":15,"version":"skywelld-0.28.1"}
}
```



#### 3.创建钱包

##### @swtc/lib

添加如下代码到test.js中

```
/创建Wallet对象
var jlib = require('@swtc/lib');
var Wallet = jlib.Wallet;
var w1 = Wallet.generate();
console.log(w1);
```

终端执行`node test.js`

返回的结果信息:

```
{
  secret: 'sscu4fQGJ3g3BeYiwhQ3DBBoJHaAQ',
  address: 'jnL3UL2qn2TD88z8S6WXjqZtBWWwHc6Mrt'
}
```



##### swtclib-app形式的restful api

执行`touch test2.js`

添加如下代码到test2.js中

```
var request = require('request');
const url='http://10.13.0.103:7900';
request(`${url}/wallet/generate`, (err, res, body)=> {
  if (!err && res.statusCode == 200) {
    console.log(body);
  }
})
```

终端执行`node test2.js`

终端返回的结果信息:

```
{"success":true,"msg":"成功","code":0,"data":{"secret":"snLaUykk4Hx6AJpsxcQveRyUzomCf","address":"jExaR2nwd1Uayvm4iN9koHjWWPDXuW9ALv"}
}
```



#### 4.根据私钥创建钱包

##### @swtc/lib

添加如下代码到test.js中

```
var jlib = require('@swtc/lib');
var Wallet = jlib.Wallet;
var w2 = Wallet.fromSecret('spyHfKQxpMdtXE8s9tsf7EYqD3o9B');
console.log(w2);
```

终端执行`node test.js`

终端返回的结果信息:

```
{ 
  secret: 'spyHfKQxpMdtXE8s9tsf7EYqD3o9B',
  address: 'jJHUNxhxHVaNhyQSXuE5J3tbzGGt2e87Z7' 
}
```



##### swtclib-app形式的restful api

添加如下代码到test2.js中

```
var request = require('request');
const url='http://10.13.0.90:7900';
var requestData = {"secret":"spyHfKQxpMdtXE8s9tsf7EYqD3o9B","rsa":"false"};
request({
    url: `${url}/wallet/generate`,
    method: "POST",
    json: true,
    headers: {
        "content-type": "application/json",
    },
    body:requestData
}, (err,res,body)=>{
    if (!err && res.statusCode == 200) {
          console.log(body);
    }
});
```

终端执行`node test2.js`

终端返回的结果信息:

```
{ success: true,
  msg: '成功',
  code: 0,
  data:
   { secret: 'spyHfKQxpMdtXE8s9tsf7EYqD3o9B',
     address: 'jJHUNxhxHVaNhyQSXuE5J3tbzGGt2e87Z7' 
   }
}
```



#### 5.获取账号信息

##### @swtc/lib

添加如下代码到test.js中

```
var jlib = require('@swtc/lib');
var Remote = jlib.Remote;
var remote = new Remote({server: 'ws://10.13.0.90:5020', issuer: 'jBciDE8Q3uJjf111VeiUNM775AMKHEbBLS'});
remote.connectPromise()
    .then(async () => {
    		let options = {account: 'j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9'};
    		let req = remote.requestAccountInfo(options);
            let response = await req.submitPromise()
            console.log(response)
            remote.disconnect()
        }
    )
    .catch(console.error)
```

终端执行`node test.js`

终端返回的结果信息:

```
{ account_data:
   { Account: 'j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9',
     Balance: '36650002',
     Flags: 0,
     LedgerEntryType: 'AccountRoot',
     OwnerCount: 0,
     PreviousTxnID:
      '83D39A2981D6EBC5CB0D81EE556BFE292754D605ADE8C7789EBEAF8331879728',
     PreviousTxnLgrSeq: 15415543,
     Sequence: 20,
     index:
      '3636E63C0105B82E4B00FDFDDC22FA6D3BAB93B5D684C3C24A927420597CF3BE' 
    },
  ledger_hash:
   '1F09D72079242A87A2F64F33817D2A23C7F8DA6125A6E14FFAE1BCC3D524E744',
  ledger_index: 15416014,
  validated: true 
}
```



##### swtclib-app形式的restful api

添加如下代码到test2.js中

```
var request = require('request');
const url = 'http://10.13.0.103:7900';
var address = "j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9";
request(`${url}/account/${address}/info`, (err, res, body)=> {
  if (!err && res.statusCode == 200) {
    console.log(body);
  }
})
```

终端执行`node test2.js`

终端返回的结果信息:

```
{"success":true,"msg":"成功","code":0,"data":{"account_data":{"Account":"j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9","Balance":"36650002","Flags":0,"LedgerEntryType":"AccountRoot","OwnerCount":0,"PreviousTxnID":"83D39A2981D6EBC5CB0D81EE556BFE292754D605ADE8C7789EBEAF8331879728","PreviousTxnLgrSeq":15415543,"Sequence":20,"index":"3636E63C0105B82E4B00FDFDDC22FA6D3BAB93B5D684C3C24A927420597CF3BE"},"ledger_hash":"38FBF18BDF2AF16AE6998C0DB1FD80DC678A7EBE725893A8A09344FE326D1573","ledger_index":15416034,"validated":true}
}
```



#### 6.请求账户余额信息

##### @swtc/lib

添加如下代码到test.js中

```
var jlib = require('@swtc/lib');
var Remote = jlib.Remote;
var remote = new Remote({server: 'ws://10.13.0.103:5020', issuer: 'jBciDE8Q3uJjf111VeiUNM775AMKHEbBLS'});
remote.connectPromise()
    .then(async () => {
    		let options = {account: 'j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9'};
    		let req = remote.requestAccountInfo(options);
            let response = await req.submitPromise()
            console.log(response)
            remote.disconnect()
        }
    )
    .catch(console.error)
```

终端执行`node test.js`

终端返回的结果信息:

```
{ account_data:
   { Account: 'j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9',
     Balance: '36650002',
     Flags: 0,
     LedgerEntryType: 'AccountRoot',
     OwnerCount: 0,
     PreviousTxnID:
      '83D39A2981D6EBC5CB0D81EE556BFE292754D605ADE8C7789EBEAF8331879728',
     PreviousTxnLgrSeq: 15415543,
     Sequence: 20,
     index:
      '3636E63C0105B82E4B00FDFDDC22FA6D3BAB93B5D684C3C24A927420597CF3BE' 
    },
  ledger_hash:
   '54EF9A8567F56490E34109A4DAF489D77F9FA3E5919E867CC7CA5A03065AF541',
  ledger_index: 15416104,
  validated: true 
}
```



##### swtclib-app形式的restful api

添加如下代码到test2.js中

```
var request = require('request');
const url = 'http://10.13.0.90:7900';
var address = "j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9";
request(`${url}/account/${address}/balances`, (err, res, body)=> {
  if (!err && res.statusCode == 200) {
    console.log(body);
  }
})
```

终端执行`node test2.js`

终端返回的结果信息:

```
{
"success":true,
"msg":"成功",
"code":0,
"data":{
"balances":[{"value":"36.650002","currency":"SWT","issuer":"","freezed":"20.000000"}],
"sequence":20
 }
}
```



#### 7.获得账号交易列表 

##### @swtc/lib

添加如下代码到test.js中

```
var jlib = require('@swtc/lib');
var Remote = jlib.Remote;
var remote = new Remote({server: 'ws://10.13.0.90:5020', issuer: 'jBciDE8Q3uJjf111VeiUNM775AMKHEbBLS'});
remote.connectPromise()
    .then(async () => {
    	    let options = {account: 'j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9'};
    	    let req = remote.requestAccountTx(options);
            let response = await req.submitPromise()
            console.log(response)
            remote.disconnect()
        }
    )
    .catch(console.error)
```

终端执行`node test.js`

终端返回的结果信息:

```
{ account: 'j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9',
  ledger_index_max: 15416498,
  ledger_index_min: 266955,
  transactions:
   [ { date: 1584001530,
       hash:
        '83D39A2981D6EBC5CB0D81EE556BFE292754D605ADE8C7789EBEAF8331879728',
       type: 'sent',
       fee: '0.01',
       result: 'tesSUCCESS',
       memos: [Array],
       counterparty: 'jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH',
       amount: [Object],
       effects: [],
       balances: [Object],
       balancesPrev: [Object] },
     { date: 1583670190,
       hash:
        '6C7A3EFA0229AF620F71D489055B3607D265B3BB67417B8B2528597262797BD8',
       type: 'sent',
       fee: '0.01',
       result: 'tesSUCCESS',
       memos: [Array],
       counterparty: 'jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH',
       amount: [Object],
       effects: [],
       balances: [Object],
       balancesPrev: [Object] },
     { date: 1583656350,
       hash:
        '4DBFFC6F4D15E8D333F0D93A5A8FEEC5F14C306C15B9812A68C8B9CD8B03A73C',
       type: 'sent',
       fee: '0.01',
       result: 'tesSUCCESS',
       memos: [Array],
       counterparty: 'jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH',
       amount: [Object],
       effects: [],
       balances: [Object],
       balancesPrev: [Object] },
     { date: 1583656320,
       hash:
        'BF48EC6E7334AD60024758226107D12D0BB05010CD0FDF84CD7F737C155F2E8F',
       type: 'sent',
       fee: '0.01',
       result: 'tesSUCCESS',
       memos: [Array],
       counterparty: 'jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH',
       amount: [Object],
       effects: [],
       balances: [Object],
       balancesPrev: [Object] },
     { date: 1583655640,
       hash:
        '080408C89D961BF587BA2B69CFA7181E44206306A02DD05DC4C6F500CF52EAA6',
       type: 'sent',
       fee: '0.01',
       result: 'tesSUCCESS',
       memos: [Array],
       counterparty: 'jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH',
       amount: [Object],
       effects: [],
       balances: [Object],
       balancesPrev: [Object] },
     { date: 1583653730,
       hash:
        'F29048E7DA45A2DED60057B81620D9313D0C9C7C17C5B613B91B7D48EB343A92',
       type: 'sent',
       fee: '0.01',
       result: 'tesSUCCESS',
       memos: [Array],
       counterparty: 'jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH',
       amount: [Object],
       effects: [],
       balances: [Object],
       balancesPrev: [Object] },
     { date: 1583460860,
       hash:
        '95D9CE48DA1B6F34B952E417C9BEC9AAB76113E34D5D09259DDB121BAA483069',
       type: 'received',
       fee: '0.01',
       result: 'tesSUCCESS',
       memos: [Array],
       counterparty: 'jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH',
       amount: [Object],
       effects: [],
       balances: [Object],
       balancesPrev: [Object] },
     { date: 1583460850,
       hash:
        'D137084ED5AAC5C095679EF075C78BFF230A5BAFF2639A7D29FDD9FE9939DA19',
       type: 'received',
       fee: '0.01',
       result: 'tesSUCCESS',
       memos: [Array],
       counterparty: 'jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH',
       amount: [Object],
       effects: [],
       balances: [Object],
       balancesPrev: [Object] },
     { date: 1583233450,
       hash:
        'FBB574B8BE52927E2D7502581D85347EF04CBCDB3635BD6CD04EB99A091BF670',
       type: 'sent',
       fee: '0.01',
       result: 'tesSUCCESS',
       memos: [Array],
       counterparty: 'jQJLeTeqayDz2W44viDEaoncH6VZ9zJPcP',
       amount: [Object],
       effects: [],
       balances: [Object],
       balancesPrev: [Object] },
     { date: 1583233450,
       hash:
        '157600C00939E1C8C65680B4215D672A792A77B4CF868DEF5520070FEA7CFC79',
       type: 'sent',
       fee: '0.01',
       result: 'tesSUCCESS',
       memos: [Array],
       counterparty: 'j4D8AqnwUFhfhRtco8Cq4R547m2su8au5r',
       amount: [Object],
       effects: [],
       balances: [Object],
       balancesPrev: [Object] },
     { date: 1583233450,
       hash:
        '52CC84E4916CADB656269E5076F299E041F48BA5E8D593BB986CAF4D540CB465',
       type: 'sent',
       fee: '0.01',
       result: 'tesSUCCESS',
       memos: [Array],
       counterparty: 'jpUCa7JwSbwvU1adNXRN7BWzTeVsTiNp1i',
       amount: [Object],
       effects: [],
       balances: [Object],
       balancesPrev: [Object] },
     { date: 1583231040,
       hash:
        'EDCEA7D56775A6F2E664148848D8CD54C724335A9330DFB23880E5762D595C6A',
       type: 'sent',
       fee: '0.01',
       result: 'tesSUCCESS',
       memos: [Array],
       counterparty: 'jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH',
       amount: [Object],
       effects: [],
       balances: [Object],
       balancesPrev: [Object] },
     { date: 1583228890,
       hash:
        'C7E7F1A29E7E221F1F505FC0678789D7BBE17E641ABFB8BCE2D55BE98EAE95DA',
       type: 'sent',
       fee: '0.01',
       result: 'tesSUCCESS',
       memos: [Array],
       counterparty: 'jQJLeTeqayDz2W44viDEaoncH6VZ9zJPcP',
       amount: [Object],
       effects: [],
       balances: [Object],
       balancesPrev: [Object] },
     { date: 1583228890,
       hash:
        '37FB446AB773045A8475127501E8DC73A205F69AB703161A4C515567C475BADD',
       type: 'sent',
       fee: '0.01',
       result: 'tesSUCCESS',
       memos: [Array],
       counterparty: 'j4D8AqnwUFhfhRtco8Cq4R547m2su8au5r',
       amount: [Object],
       effects: [],
       balances: [Object],
       balancesPrev: [Object] },
     { date: 1583228890,
       hash:
        '175868284546FF158C3626678BCCACEEEB2F613481223E2F45D24D027A330B50',
       type: 'sent',
       fee: '0.01',
       result: 'tesSUCCESS',
       memos: [Array],
       counterparty: 'jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH',
       amount: [Object],
       effects: [],
       balances: [Object],
       balancesPrev: [Object] },
     { date: 1583228800,
       hash:
        'EABC1995EB9C076F6771183773ADBCAE19B106C4A650D3C942C85318A933FBBA',
       type: 'sent',
       fee: '0.01',
       result: 'tesSUCCESS',
       memos: [Array],
       counterparty: 'jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH',
       amount: [Object],
       effects: [],
       balances: [Object],
       balancesPrev: [Object] },
     { date: 1583228430,
       hash:
        'A87CFF848A556CB70D6B6838C1D31ECDEAD23606EC8D79627DE0CD8EBAC20B8E',
       type: 'sent',
       fee: '0.01',
       result: 'tesSUCCESS',
       memos: [Array],
       counterparty: 'jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH',
       amount: [Object],
       effects: [],
       balances: [Object],
       balancesPrev: [Object] },
     { date: 1583224650,
       hash:
        'C1D4D7A81183BFD1AFCB476A3EC9EE078E354C214C71947AF9F9A06BA075D1E6',
       type: 'sent',
       fee: '0.01',
       result: 'tesSUCCESS',
       memos: [Array],
       counterparty: 'jBfmi3DjNBvSJeQVSsVHjfrfaXKwwp7Fc5',
       amount: [Object],
       effects: [],
       balances: [Object],
       balancesPrev: [Object] },
     { date: 1583223180,
       hash:
        '64885C36213A0821041D7AC7B7FD49D4B1588033106173A18B7239BC9EF1369A',
       type: 'sent',
       fee: '0.01',
       result: 'tesSUCCESS',
       memos: [Array],
       counterparty: 'jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH',
       amount: [Object],
       effects: [],
       balances: [Object],
       balancesPrev: [Object] },
     { date: 1583222700,
       hash:
        '2D5D938AD59D3A2C962581170355F41F2D3FE2A7D9F696309AB8FFFEB8E0D53D',
       type: 'sent',
       fee: '0.01',
       result: 'tesSUCCESS',
       memos: [Array],
       counterparty: 'jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH',
       amount: [Object],
       effects: [],
       balances: [Object],
       balancesPrev: [Object] },
     { date: 1583220760,
       hash:
        '3B7A327D4610CFC2EFD46313E18F78DA74F5A690944CCF9499DA8327C506957F',
       type: 'sent',
       fee: '0.01',
       result: 'tecNO_DST_INSUF_SWT',
       memos: [Array],
       counterparty: 'jnL3UL2qn2TD88z8S6WXjqZtBWWwHc6Mrt',
       amount: [Object],
       effects: [] },
     { date: 1583208390,
       hash:
        '4B37D6E7B88354199DD49216448BB5C490050CDAC830D1E52DB8E5CFDD26BB4F',
       type: 'received',
       fee: '0.01',
       result: 'tesSUCCESS',
       memos: [Array],
       counterparty: 'jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH',
       amount: [Object],
       effects: [],
       balances: [Object],
       balancesPrev: [Object] } ] 
 }
```



##### swtclib-app形式的restful api

添加如下代码到test2.js中

```
var request = require('request');
const url = 'http://10.13.0.103:7900';
var address = "j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9";
request(`${url}/account/${address}/tx`, (err, res, body)=> {
  if (!err && res.statusCode == 200) {
    console.log(body);
  }
})
```

终端执行`node test2.js`

终端返回的结果信息:

```
{"success":true,"msg":"获取交易列表成功","code":0,"data":{"account":"j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9","ledger_index_max":15416530,"ledger_index_min":266955,"limit":20,"marker":{"ledger":15337466,"seq":7},"transactions":[{"date":1584001530,"hash":"83D39A2981D6EBC5CB0D81EE556BFE292754D605ADE8C7789EBEAF8331879728","type":"sent","fee":"0.01","result":"tesSUCCESS","memos":[{"MemoData":"xhh测试单笔支付"}],"counterparty":"jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH","amount":{"value":"0.1","currency":"SWT","issuer":""},"effects":[],"balances":{"SWT":36.650002},"balancesPrev":{"SWT":36.760002}},{"date":1583670190,"hash":"6C7A3EFA0229AF620F71D489055B3607D265B3BB67417B8B2528597262797BD8","type":"sent","fee":"0.01","result":"tesSUCCESS","memos":[{"MemoData":"测试签名"}],"counterparty":"jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH","amount":{"value":"0.9","currency":"SWT","issuer":""},"effects":[],"balances":{"SWT":36.760002},"balancesPrev":{"SWT":37.670002}},{"date":1583656350,"hash":"4DBFFC6F4D15E8D333F0D93A5A8FEEC5F14C306C15B9812A68C8B9CD8B03A73C","type":"sent","fee":"0.01","result":"tesSUCCESS","memos":[{"MemoData":"测试签名"}],"counterparty":"jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH","amount":{"value":"0.4","currency":"SWT","issuer":""},"effects":[],"balances":{"SWT":37.670002},"balancesPrev":{"SWT":38.080002}},{"date":1583656320,"hash":"BF48EC6E7334AD60024758226107D12D0BB05010CD0FDF84CD7F737C155F2E8F","type":"sent","fee":"0.01","result":"tesSUCCESS","memos":[{"MemoData":"测试签名"}],"counterparty":"jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH","amount":{"value":"0.4","currency":"SWT","issuer":""},"effects":[],"balances":{"SWT":38.080002},"balancesPrev":{"SWT":38.490002}},{"date":1583655640,"hash":"080408C89D961BF587BA2B69CFA7181E44206306A02DD05DC4C6F500CF52EAA6","type":"sent","fee":"0.01","result":"tesSUCCESS","memos":[{"MemoData":"测试签名"}],"counterparty":"jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH","amount":{"value":"0.2","currency":"SWT","issuer":""},"effects":[],"balances":{"SWT":38.490002},"balancesPrev":{"SWT":38.700002}},{"date":1583653730,"hash":"F29048E7DA45A2DED60057B81620D9313D0C9C7C17C5B613B91B7D48EB343A92","type":"sent","fee":"0.01","result":"tesSUCCESS","memos":[{"MemoData":"测试签名"}],"counterparty":"jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH","amount":{"value":"0.2","currency":"SWT","issuer":""},"effects":[],"balances":{"SWT":38.700002},"balancesPrev":{"SWT":38.910002}},{"date":1583460860,"hash":"95D9CE48DA1B6F34B952E417C9BEC9AAB76113E34D5D09259DDB121BAA483069","type":"received","fee":"0.01","result":"tesSUCCESS","memos":[{"MemoData":"888"}],"counterparty":"jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH","amount":{"value":"0.000001","currency":"SWT","issuer":""},"effects":[],"balances":{"SWT":38.910002},"balancesPrev":{"SWT":38.910001}},{"date":1583460850,"hash":"D137084ED5AAC5C095679EF075C78BFF230A5BAFF2639A7D29FDD9FE9939DA19","type":"received","fee":"0.01","result":"tesSUCCESS","memos":[{"MemoData":"888"}],"counterparty":"jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH","amount":{"value":"0.000001","currency":"SWT","issuer":""},"effects":[],"balances":{"SWT":38.910001},"balancesPrev":{"SWT":38.91}},{"date":1583233450,"hash":"FBB574B8BE52927E2D7502581D85347EF04CBCDB3635BD6CD04EB99A091BF670","type":"sent","fee":"0.01","result":"tesSUCCESS","memos":[{"MemoData":"测试3"}],"counterparty":"jQJLeTeqayDz2W44viDEaoncH6VZ9zJPcP","amount":{"value":"0.02","currency":"SWT","issuer":""},"effects":[],"balances":{"SWT":38.91},"balancesPrev":{"SWT":38.94}},{"date":1583233450,"hash":"157600C00939E1C8C65680B4215D672A792A77B4CF868DEF5520070FEA7CFC79","type":"sent","fee":"0.01","result":"tesSUCCESS","memos":[{"MemoData":"测试2"}],"counterparty":"j4D8AqnwUFhfhRtco8Cq4R547m2su8au5r","amount":{"value":"0.02","currency":"SWT","issuer":""},"effects":[],"balances":{"SWT":38.94},"balancesPrev":{"SWT":38.97}},{"date":1583233450,"hash":"52CC84E4916CADB656269E5076F299E041F48BA5E8D593BB986CAF4D540CB465","type":"sent","fee":"0.01","result":"tesSUCCESS","memos":[{"MemoData":"测试1"}],"counterparty":"jpUCa7JwSbwvU1adNXRN7BWzTeVsTiNp1i","amount":{"value":"0.02","currency":"SWT","issuer":""},"effects":[],"balances":{"SWT":38.97},"balancesPrev":{"SWT":39}},{"date":1583231040,"hash":"EDCEA7D56775A6F2E664148848D8CD54C724335A9330DFB23880E5762D595C6A","type":"sent","fee":"0.01","result":"tesSUCCESS","memos":[{"MemoData":"测试签名"}],"counterparty":"jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH","amount":{"value":"0.2","currency":"SWT","issuer":""},"effects":[],"balances":{"SWT":39},"balancesPrev":{"SWT":39.21}},{"date":1583228890,"hash":"C7E7F1A29E7E221F1F505FC0678789D7BBE17E641ABFB8BCE2D55BE98EAE95DA","type":"sent","fee":"0.01","result":"tesSUCCESS","memos":[{"MemoData":"测试3"}],"counterparty":"jQJLeTeqayDz2W44viDEaoncH6VZ9zJPcP","amount":{"value":"0.1","currency":"SWT","issuer":""},"effects":[],"balances":{"SWT":39.21},"balancesPrev":{"SWT":39.32}},{"date":1583228890,"hash":"37FB446AB773045A8475127501E8DC73A205F69AB703161A4C515567C475BADD","type":"sent","fee":"0.01","result":"tesSUCCESS","memos":[{"MemoData":"测试2"}],"counterparty":"j4D8AqnwUFhfhRtco8Cq4R547m2su8au5r","amount":{"value":"0.1","currency":"SWT","issuer":""},"effects":[],"balances":{"SWT":39.32},"balancesPrev":{"SWT":39.43}},{"date":1583228890,"hash":"175868284546FF158C3626678BCCACEEEB2F613481223E2F45D24D027A330B50","type":"sent","fee":"0.01","result":"tesSUCCESS","memos":[{"MemoData":"测试1"}],"counterparty":"jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH","amount":{"value":"0.1","currency":"SWT","issuer":""},"effects":[],"balances":{"SWT":39.43},"balancesPrev":{"SWT":39.54}},{"date":1583228800,"hash":"EABC1995EB9C076F6771183773ADBCAE19B106C4A650D3C942C85318A933FBBA","type":"sent","fee":"0.01","result":"tesSUCCESS","memos":[{"MemoData":"测试1"}],"counterparty":"jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH","amount":{"value":"0.1","currency":"SWT","issuer":""},"effects":[],"balances":{"SWT":39.54},"balancesPrev":{"SWT":39.65}},{"date":1583228430,"hash":"A87CFF848A556CB70D6B6838C1D31ECDEAD23606EC8D79627DE0CD8EBAC20B8E","type":"sent","fee":"0.01","result":"tesSUCCESS","memos":[{"MemoData":"测试1"}],"counterparty":"jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH","amount":{"value":"0.1","currency":"SWT","issuer":""},"effects":[],"balances":{"SWT":39.65},"balancesPrev":{"SWT":39.76}},{"date":1583224650,"hash":"C1D4D7A81183BFD1AFCB476A3EC9EE078E354C214C71947AF9F9A06BA075D1E6","type":"sent","fee":"0.01","result":"tesSUCCESS","memos":[{"MemoData":"xhh测试单笔支付"}],"counterparty":"jBfmi3DjNBvSJeQVSsVHjfrfaXKwwp7Fc5","amount":{"value":"0.1","currency":"SWT","issuer":""},"effects":[],"balances":{"SWT":39.76},"balancesPrev":{"SWT":39.87}},{"date":1583223180,"hash":"64885C36213A0821041D7AC7B7FD49D4B1588033106173A18B7239BC9EF1369A","type":"sent","fee":"0.01","result":"tesSUCCESS","memos":[{"MemoData":"xhh测试单笔支付"}],"counterparty":"jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH","amount":{"value":"0.1","currency":"SWT","issuer":""},"effects":[],"balances":{"SWT":39.87},"balancesPrev":{"SWT":39.98}},{"date":1583222700,"hash":"2D5D938AD59D3A2C962581170355F41F2D3FE2A7D9F696309AB8FFFEB8E0D53D","type":"sent","fee":"0.01","result":"tesSUCCESS","memos":[{"MemoData":"xhh测试单笔支付"}],"counterparty":"jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH","amount":{"value":"10","currency":"SWT","issuer":""},"effects":[],"balances":{"SWT":39.98},"balancesPrev":{"SWT":49.99}}]}}
```



#### 8.获取最新关闭的账本信息

##### @swtc/lib

添加如下代码到test.js中

```
var jlib = require('@swtc/lib');
var Remote = jlib.Remote;
var remote = new Remote({server: 'ws://10.13.0.103:5020', issuer: 'jBciDE8Q3uJjf111VeiUNM775AMKHEbBLS'});
remote.connectPromise()
	.then(async () => { 
			let response = await remote.requestLedgerClosed().submitPromise()
			console.log(response)
			remote.disconnect()
		}
	)
	.catch(console.error)
```

终端执行`node test.js`

终端返回的结果信息:

```
{ ledger_hash:
   '0F847A8615D7C903916F6D146B2B0DF01F5802CC11F7FAE636DE6EFBEF894D75',
  ledger_index: 15416546 
}
```



##### swtclib-app形式的restful api

添加如下代码到test2.js中

```
var request = require('request');
const url = 'http://10.13.0.90:7900';
request(`${url}/ledgers/closed`, (err, res, body)=> {
  if (!err && res.statusCode == 200) {
    console.log(body);
  }
})
```

终端执行`node test2.js`

终端返回的结果信息:

```
{
"success":true,
"msg":"成功",
"code":0,
"data":{"ledger_hash":"1313EA89C0FB8197D5BE49371EE2FE9993A1DEBF8EEBBE9DA8CDDAE981E6096A",
 "ledger_index":15416554
}
}
```



#### 9.根据hash获取某一账本具体信息

##### @swtc/lib

添加如下代码到test.js中

```
var jlib = require('@swtc/lib');
var Remote = jlib.Remote;
var remote = new Remote({server: 'ws://10.13.0.103:5020', issuer: 'jBciDE8Q3uJjf111VeiUNM775AMKHEbBLS'});
remote.connectPromise()
	.then(async () => { 
			let response = await remote.requestLedger({
					ledger_hash: '1313EA89C0FB8197D5BE49371EE2FE9993A1DEBF8EEBBE9DA8CDDAE981E6096A',
					transactions: true
				}).submitPromise()
			console.log(response)
			remote.disconnect()
		}
	)
	.catch(console.error)
```

终端执行`node test.js`

终端返回的结果信息:

```
{ 
  accepted: true,
  account_hash:
   'EB3D949B25AD4A4AE8394620E29C8591C22DE0C9841CA2B66B56E374ECF1F051',
  close_time: 637326840,
  close_time_human: '2020-Mar-12 11:14:00',
  close_time_resolution: 10,
  closed: true,
  hash:
   '1313EA89C0FB8197D5BE49371EE2FE9993A1DEBF8EEBBE9DA8CDDAE981E6096A',
  ledger_hash:
   '1313EA89C0FB8197D5BE49371EE2FE9993A1DEBF8EEBBE9DA8CDDAE981E6096A',
  ledger_index: '15416554',
  parent_hash:
   '16EDF5B946AF8FE5A2034F27666D974E502BDF52248B37A096FACA7E8448E2B6',
  seqNum: '15416554',
  totalCoins: '599999999999460713',
  total_coins: '599999999999460713',
  transaction_hash:
   '5A070713AE2CBE70717AEBD83247417B174007CD6C8967283CF04AD7255C3C89',
  transactions:
   [ '29FD37586272CB2597FA64C013CD7395701DB495C31E4877DDA74E41351EBDF9',
     '8941F455C9E83C345AC1EE70EBA8823C673247B3E71486457A9D21A03504655D',
     '90526928ED486C9BF635703CF3CBB7B40F2ECCADE9609823CBF8041ED8CB5C0E',
     'ED797CB473685291938F908887F8F4A870ABB168DCD5FF98D124945300F4FB0B' ]
}
```



##### swtclib-app形式的restful api

添加如下代码到test2.js中

```
var request = require('request');
const url = 'http://10.13.0.103:7900';
var hash = '1313EA89C0FB8197D5BE49371EE2FE9993A1DEBF8EEBBE9DA8CDDAE981E6096A';
request(`${url}/ledgers/hash/${hash}?transactions=true`, (err, res, body)=> {
  if (!err && res.statusCode == 200) {
    console.log(body);
  }
})
```

终端执行`node test2.js`

终端返回的结果信息:

```
{"success":true,"msg":"成功","code":0,"data":{"accepted":true,"account_hash":"EB3D949B25AD4A4AE8394620E29C8591C22DE0C9841CA2B66B56E374ECF1F051","close_time":637326840,"close_time_human":"2020-Mar-12 11:14:00","close_time_resolution":10,"closed":true,"hash":"1313EA89C0FB8197D5BE49371EE2FE9993A1DEBF8EEBBE9DA8CDDAE981E6096A","ledger_hash":"1313EA89C0FB8197D5BE49371EE2FE9993A1DEBF8EEBBE9DA8CDDAE981E6096A","ledger_index":"15416554","parent_hash":"16EDF5B946AF8FE5A2034F27666D974E502BDF52248B37A096FACA7E8448E2B6","seqNum":"15416554","totalCoins":"599999999999460713","total_coins":"599999999999460713","transaction_hash":"5A070713AE2CBE70717AEBD83247417B174007CD6C8967283CF04AD7255C3C89","transactions":["29FD37586272CB2597FA64C013CD7395701DB495C31E4877DDA74E41351EBDF9","8941F455C9E83C345AC1EE70EBA8823C673247B3E71486457A9D21A03504655D","90526928ED486C9BF635703CF3CBB7B40F2ECCADE9609823CBF8041ED8CB5C0E","ED797CB473685291938F908887F8F4A870ABB168DCD5FF98D124945300F4FB0B"]}}
```



#### 10.根据账本高度获取某一账本具体信息

##### @swtc/lib

添加如下代码到test.js中

```
var jlib = require('@swtc/lib');
var Remote = jlib.Remote;
var remote = new Remote({server: 'ws://10.13.0.90:5020', issuer: 'jBciDE8Q3uJjf111VeiUNM775AMKHEbBLS'});
remote.connectPromise()
	.then(async () => { 
			let response = await remote.requestLedger({
					ledger_index: '15416691',
					transactions: true
				}).submitPromise()
			console.log(response)
			remote.disconnect()
		}
	)
	.catch(console.error)
```

终端执行`node test.js`

终端返回的结果信息:

```
{ accepted: true,
  account_hash:
   '43482F9612E04C2A1D471D38EF66D51E14F011A8F10BC7B89085B352FBA7C9BB',
  close_time: 637328210,
  close_time_human: '2020-Mar-12 11:36:50',
  close_time_resolution: 10,
  closed: true,
  hash:
   '515835B38EBA58A5556699F296CA7320ABE2F4A1AF430729CF3D36E2F7D20468',
  ledger_hash:
   '515835B38EBA58A5556699F296CA7320ABE2F4A1AF430729CF3D36E2F7D20468',
  ledger_index: '15416691',
  parent_hash:
   '4B8C57B35013A41B830E27780E00A8DC196545B34801C6549D4E89463A07C123',
  seqNum: '15416691',
  totalCoins: '599999999999460713',
  total_coins: '599999999999460713',
  transaction_hash:
   'A4E4FF6058C79BF892A487B748BD66634F7315927CFAB56EF82C288AC4BC8BBF',
  transactions:
   [ '3C526773D32EE9F9571ADC51C0BD39148A7193B20CB194C1D77F6045CEBD0BE9' ] 
   }
```



##### swtclib-app形式的restful api

添加如下代码到test2.js中

```
var request = require('request');
const url = 'http://10.13.0.103:7900';
request(`${url}/ledgers/index/15416691?transactions=true`, (err, res, body)=> {
  if (!err && res.statusCode == 200) {
    console.log(body);
  }
})
```

终端执行`node test2.js`

终端返回的结果信息:

```
{"success":true,"msg":"成功","code":0,"data":{"accepted":true,"account_hash":"43482F9612E04C2A1D471D38EF66D51E14F011A8F10BC7B89085B352FBA7C9BB","close_time":637328210,"close_time_human":"2020-Mar-12 11:36:50","close_time_resolution":10,"closed":true,"hash":"515835B38EBA58A5556699F296CA7320ABE2F4A1AF430729CF3D36E2F7D20468","ledger_hash":"515835B38EBA58A5556699F296CA7320ABE2F4A1AF430729CF3D36E2F7D20468","ledger_index":"15416691","parent_hash":"4B8C57B35013A41B830E27780E00A8DC196545B34801C6549D4E89463A07C123","seqNum":"15416691","totalCoins":"599999999999460713","total_coins":"599999999999460713","transaction_hash":"A4E4FF6058C79BF892A487B748BD66634F7315927CFAB56EF82C288AC4BC8BBF","transactions":["3C526773D32EE9F9571ADC51C0BD39148A7193B20CB194C1D77F6045CEBD0BE9"]}}
```



#### 11.单笔转账

##### @swtc/lib

添加如下代码到test.js中

```
var jlib = require('@swtc/lib');
var Remote = jlib.Remote;
var remote = new Remote({server: 'ws://10.13.0.90:5020', issuer: 'jBciDE8Q3uJjf111VeiUNM775AMKHEbBLS'});
remote.connectPromise()
    .then(async () => {
   		     let tx = remote.buildPaymentTx({
   		         account: 'j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9',
   		         to: 'jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH',
   		         amount: remote.makeAmount(1)
   		     });
            let response = await tx.submitPromise('ssmNtj6a48FJEN3JZqaSGxVndXywi', '给支付')
            console.log(response)
            remote.disconnect()
        }
    )
    .catch(console.error)
```

终端执行`node test.js`

终端返回的结果信息:

```
{ engine_result: 'tesSUCCESS',
  engine_result_code: 0,
  engine_result_message:
   'The transaction was applied. Only final in a validated ledger.',
  tx_blob:
 '120000220000000024000000156140000000000F4240684000000000002710732102BE3719EA0BD52FC365FA84CE675276F14991717C9B1F4E58FC2AD9CDCCA9BF5774473045022100CD7B608184957FA310E1BC39783CF45B69C796560FA540BF76D0A188D3C2C0FA02203D43FC4CCBDC0B739B74B9C3FD0C7E00606A227E45EEB50E024D14710417BBC58114EBECD56515030FD1DBFCE1FCF3BC17DA15B504DE83144811B4F748718DED78C4B946AD3ABFEC8746FB05F9EA7D09E7BB99E694AFE4BB98E1F1',
  tx_json:
   { Account: 'j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9',
     Amount: '1000000',
     Destination: 'jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH',
     Fee: '10000',
     Flags: 0,
     Memos: [ [Object] ],
     Sequence: 21,
     SigningPubKey:
      '02BE3719EA0BD52FC365FA84CE675276F14991717C9B1F4E58FC2AD9CDCCA9BF57',
     TransactionType: 'Payment',
     TxnSignature:
      '3045022100CD7B608184957FA310E1BC39783CF45B69C796560FA540BF76D0A188D3C2C0FA02203D43FC4CCBDC0B739B74B9C3FD0C7E00606A227E45EEB50E024D14710417BBC5',
     hash:
      'B65AE578355B01DBCE0F4758E68A2058A91A57D955069EE5F771D34E29490E8A' } 
      }
```



##### swtclib-app形式的restful api

添加如下代码到test2.js中

```
var request = require('request');
const url = 'http://10.13.0.103:7900';
var requestData = {
 "account":"j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9",
 "to":"jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH",
 "value":"0.1",
 "currency":"SWT",
 "issuer":"",
 "secret":"ssmNtj6a48FJEN3JZqaSGxVndXywi",
 "addMemo":"xhh测试单笔支付"
};
request({
    url: `${url}/tx/pay`,
    method: "POST",
    json: true,
    headers: {
        "content-type": "application/json",
    },
    body:requestData
}, (err,res,body)=>{
    if (!err && res.statusCode == 200) {
          console.log(body);
    }
});
```

终端执行`node test2.js`

终端返回的结果信息:

```
{ success: true,
  msg: '请求成功',
  code: 0,
  data:
   { engine_result: 'tesSUCCESS',
     engine_result_code: 0,
     engine_result_message:
      'The transaction was applied. Only final in a validated ledger.',
     tx_blob:
      '120000220000000024000000146140000000000186A0684000000000002710732102BE3719EA0BD52FC365FA84CE675276F14991717C9B1F4E58FC2AD9CDCCA9BF5774473045022100DBFC900407406F5425D166991D621EC7EFBAE3DD2A58BBB156FFE416BAF44318022020A2E5BC38EE8F24D0CC19343A54C3DDE685D1BB5B831B6C135A04DF496810818114EBECD56515030FD1DBFCE1FCF3BC17DA15B504DE83144811B4F748718DED78C4B946AD3ABFEC8746FB05F9EA7D15786868E6B58BE8AF95E58D95E7AC94E694AFE4BB98E1F1',
     tx_json:
      { Account: 'j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9',
        Amount: '100000',
        Destination: 'jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH',
        Fee: '10000',
        Flags: 0,
        Memos: [Array],
        Sequence: 20,
        SigningPubKey:
         '02BE3719EA0BD52FC365FA84CE675276F14991717C9B1F4E58FC2AD9CDCCA9BF57',
        TransactionType: 'Payment',
        TxnSignature:
         '3045022100DBFC900407406F5425D166991D621EC7EFBAE3DD2A58BBB156FFE416BAF44318022020A2E5BC38EE8F24D0CC19343A54C3DDE685D1BB5B831B6C135A04DF49681081',
        hash:
         'A7A75A946A2E14F853F1E9B32F9266B6647A7D53AB544CD68EDAE870B3D7B25F' } } }
```



#### 12.批量转账

##### @swtc/lib

添加如下代码到test.js中

```
   const jlib =  require('@swtc/lib');
   const Remote = jlib.Remote;
   const remote = new Remote({server: 'ws://10.13.0.90:5020', issuer: 'jBciDE8Q3uJjf111VeiUNM775AMKHEbBLS'});
   var tx = [
         {
         "to":"jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH",
         "value":"0.1",
         "currency":"SWT",
         "issuer":" ",
         "addMemo":"测试1"
         },
         {
         "to":"jhzL5Q2TZATYb3Q4GkWFzquHxjfZLnFkCD",
         "value":"0.1",
         "currency":"SWT",
         "issuer":" ",
         "addMemo":"测试2"
         },
         {
         "to":"jUdvEkhbZyVC2KCK3U45DJuHPF2EVDZ3DF",
         "value":"0.1",
         "currency":"SWT",
         "issuer":" ",
         "addMemo":"测试3"
         }
    ]
   var account = "j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9"
   var secret = "ssmNtj6a48FJEN3JZqaSGxVndXywi"
   const resultData = [];
   remote.connectPromise()
        .then(async () => {
          const accountInfo = await remote.requestAccountInfo({ account }).submitPromise();
          let sequence = accountInfo.account_data.Sequence;
          for (const i in tx) {
            const amount = remote.makeAmount(tx[i].value, tx[i].currency, tx[i].issuer);
            const txObject = remote.buildPaymentTx({
              account,
              to: tx[i].to,
              amount,
            });
            const response = await txObject.submitPromise(
              secret,
              tx[i].addMemo ? tx[i].addMemo : '',
              sequence
            ).then(result => {
              return { success: true, data: result };
            }).catch(e => {
              return { success: false, data: e };
            });
            if (response.success === true) {
              sequence = sequence + 1;
              const response_abstract = {
                success: true,
                msg: `连接成功,交易结果为${response.data.engine_result}`,
                index: i,
                data: {
                  engine_result: response.data.engine_result,
                  engine_result_code: response.data.engine_result_code,
                  engine_result_message: response.data.engine_result_message,
                  sequence: response.data.tx_json.Sequence,
                  hash: response.data.tx_json.hash,
                },
              };
              resultData.push(response_abstract);
              continue;
            }
            if (response.success === false) {
              const response_abstract = {
                success: false,
                index: i,
                msg: response.data,
                data: {},
              };
              resultData.push(response_abstract);
              continue;
            }
          }
          console.log({ success: true, msg: '全部连接执行成功', data: resultData });
          remote.disconnect();      
        })
        .catch(e => {
         console.log(e)
        });  
```

终端执行`node test.js`

终端返回的结果信息:

```
{ success: true,
  msg: '全部连接执行成功',
  data:
   [ { success: true,
       msg: '连接成功,交易结果为tesSUCCESS',
       index: '0',
       data: [Object] },
     { success: true,
       msg: '连接成功,交易结果为tesSUCCESS',
       index: '1',
       data: [Object] },
     { success: true,
       msg: '连接成功,交易结果为tesSUCCESS',
       index: '2',
       data: [Object] } ] 
 }
```



##### swtclib-app形式的restful api

添加如下代码到test2.js中

```
var request = require('request');
const url = 'http://10.13.0.103:7900';
var requestData = {
 "account":"j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9",
 "secret":"ssmNtj6a48FJEN3JZqaSGxVndXywi",
 "rsa":"false",
 "tx":[
 {
 "to":"jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH",
 "value":"0.1",
 "currency":"SWT",
 "issuer":" ",
 "addMemo":"测试1"
 },
 {
 "to":"jhzL5Q2TZATYb3Q4GkWFzquHxjfZLnFkCD",
 "value":"0.1",
 "currency":"SWT",
 "issuer":" ",
 "addMemo":"测试2"
 },
 {
 "to":"jUdvEkhbZyVC2KCK3U45DJuHPF2EVDZ3DF",
 "value":"0.1",
 "currency":"SWT",
 "issuer":" ",
 "addMemo":"测试3"
 }
 ]
};
request({
    url: `${url}/tx/batch`,
    method: "POST",
    json: true,
    headers: {
        "content-type": "application/json",
    },
    body:requestData
}, (err,res,body)=>{
    if (!err && res.statusCode == 200) {
          console.log(body.data[0].data);
    }
});
```

终端执行`node test2.js`

终端返回的结果信息:

```
{ success: true,
  msg: '请求成功',
  code: 0,
  data:
   [ { success: true,
       msg: '连接成功,交易结果为tesSUCCESS',
       index: '0',
       data: [Object] },
     { success: true,
       msg: '连接成功,交易结果为tesSUCCESS',
       index: '1',
       data: [Object] },
     { success: true,
       msg: '连接成功,交易结果为tesSUCCESS',
       index: '2',
       data: [Object] } ] 
 }
```



#### 13.签名转账

##### @swtc/lib

添加如下代码到test.js中

```
  var  jlib = require('@swtc/lib'),
       Remote = jlib.Remote,
       account  = "j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9",
       secret = "ssmNtj6a48FJEN3JZqaSGxVndXywi",
       to = "jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH",
       value = "1",
       currency = "SWT" ,
       issuer = " ",
       addMemo = " ";    
  
  async  function getSignBlob({ account, to, value, currency, issuer, secret, addMemo }) {
    return new Promise((resolve ,reject)=> {
      var remote1 = getRemote()
      const amount = remote1.makeAmount(value,currency ,issuer)   
      remote1.connectPromise()
        .then(async () => {
          const tx = remote1.buildPaymentTx({
            account,
            to,
            amount,
          });       
            const response = await tx.signPromise(
              secret,
              addMemo
            );
          resolve({ success: true, data: response }); 
          remote1.disconnect()    
        })
        .catch(e => {         
          reject(e);
        });
    });
  }

 function getRemote(){
           return new Remote({server: 'ws://10.13.0.90:5020', issuer: 'jBciDE8Q3uJjf111VeiUNM775AMKHEbBLS'})
  }
 
  async function main(){
          var blob = await  getSignBlob({ account, to, value, currency, issuer, secret, addMemo });
          blob = blob.data;
          var remote2 = getRemote();
          remote2 .connectPromise()
           .then(async () => {
               const tx = remote2.buildSignTx({ blob }); 
               const response = await tx.submitPromise();
               console.log(response);
               remote2.disconnect();
               })
        .catch(e=>{
               console.log(e);
        })
  }

  main()
```

终端执行`node test.js`

终端返回的结果信息:

```
 engine_result: 'tesSUCCESS',
  engine_result_code: 0,
  engine_result_message:
   'The transaction was applied. Only final in a validated ledger.',
  tx_blob:
   '120000220000000024000000296140000000000F4240684000000000002710732102BE3719EA0BD52FC365FA84CE675276F14991717C9B1F4E58FC2AD9CDCCA9BF5774473045022100C9C3AB720A319EE7D5AA952B2D345B19B04DB05C81AD1B14457879906BD306070220251021CC8825BC9DB78F49AD7E78235DF3D6F387BF440B73DA5B000FD81DE6AA8114EBECD56515030FD1DBFCE1FCF3BC17DA15B504DE83144811B4F748718DED78C4B946AD3ABFEC8746FB05F9EA7D0120E1F1',
  tx_json:
   { Account: 'j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9',
     Amount: '1000000',
     Destination: 'jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH',
     Fee: '10000',
     Flags: 0,
     Memos: [ [Object] ],
     Sequence: 41,
     SigningPubKey:
      '02BE3719EA0BD52FC365FA84CE675276F14991717C9B1F4E58FC2AD9CDCCA9BF57',
     TransactionType: 'Payment',
     TxnSignature:
      '3045022100C9C3AB720A319EE7D5AA952B2D345B19B04DB05C81AD1B14457879906BD306070220251021CC8825BC9DB78F49AD7E78235DF3D6F387BF440B73DA5B000FD81DE6AA',
     hash:
      'B73D18EBBC8A3F9ED446F85FE75384FA23708CE925C7F204D1563157015FAE00' }
 }
```



##### swtclib-app形式的restful api

添加如下代码到test2.js中

```
var request = require('request');
const url = 'http://10.13.0.90:7900';
var requestData = {
 "account":"j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9",
 "to":"jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH",
 "value":"0.2",
 "currency":"SWT",
 "issuer":" ",
 "secret":"ssmNtj6a48FJEN3JZqaSGxVndXywi",
 "addMemo":"测试签名",
 "rsa":"false"
};
request({
    url: `${url}/sign/pay`,
    method: "POST",
    json: true,
    headers: {
        "content-type": "application/json",
    },
    body:requestData
}, (err,res,body)=>{
    if (!err && res.statusCode == 200) {
          request({
            url: `${url}/tx/blob`,
            method: "POST",
            json: true,
            headers: {
                "content-type": "application/json",
            },
            body:{
                "blob":body.data
            }
        },function(err,res,body){
            if (!err && res.statusCode == 200) {
                  console.log(body);
            }
})
    }
});
```

终端执行`node test2.js`

终端返回的结果信息:

```
{ success: true,
  msg: '请求成功',
  code: 0,
  data:
   { engine_result: 'tesSUCCESS',
     engine_result_code: 0,
     engine_result_message:
      'The transaction was applied. Only final in a validated ledger.',
     tx_blob:
      '12000022000000002400000019614000000000030D40684000000000002710732102BE3719EA0BD52FC365FA84CE675276F14991717C9B1F4E58FC2AD9CDCCA9BF57744630440220725F14448E939C043D23452D34694751BF938271C4915C36A72E006125FD819D022014F951FF47D60A07A48307EEEE7577E633795BBB8B27D83C606E330B2F58A52F8114EBECD56515030FD1DBFCE1FCF3BC17DA15B504DE83144811B4F748718DED78C4B946AD3ABFEC8746FB05F9EA7D0CE6B58BE8AF95E7ADBEE5908DE1F1',
     tx_json:
      { Account: 'j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9',
        Amount: '200000',
        Destination: 'jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH',
        Fee: '10000',
        Flags: 0,
        Memos: [Array],
        Sequence: 25,
        SigningPubKey:
         '02BE3719EA0BD52FC365FA84CE675276F14991717C9B1F4E58FC2AD9CDCCA9BF57',
        TransactionType: 'Payment',
        TxnSignature:
         '30440220725F14448E939C043D23452D34694751BF938271C4915C36A72E006125FD819D022014F951FF47D60A07A48307EEEE7577E633795BBB8B27D83C606E330B2F58A52F',
        hash:
         'F72E001E0973B25A6141D5E133CFC74751019365682722B8626A33D97AF3AA6A' } } }

```



#### 14.批量签名转账

##### @swtc/lib

添加如下代码到test.js中

```
  var jlib = require('@swtc/lib'),
        Remote = jlib.Remote,
        account  = "j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9",
        secret = "ssmNtj6a48FJEN3JZqaSGxVndXywi",
        tx=[
             {
             "to":"jJeg3sZzh5KsZpCjyvzorQokpknviNBzzZ",
             "value":"0.02",
             "currency":"SWT",
             "issuer":" ",
             "addMemo":"测试1"
             },
             {
             "to":"jNByvf6ovN2Fh7axYQhSGwDLrfoQpSaAmi",
             "value":"0.02",
             "currency":"SWT",
             "issuer":" ",
             "addMemo":"测试2"
             },
             {
             "to":"jQnJiEqoW7MMSS7HCZBdWLMUXLcPSSPfQi",
             "value":"0.02",
             "currency":"SWT",
             "issuer":" ",
             "addMemo":"测试3"
             }
       ];    

 function getRemote(){
           return new Remote({server: 'ws://10.13.0.103:5020', issuer: 'jBciDE8Q3uJjf111VeiUNM775AMKHEbBLS'})
  }

 async function signBatchBlob({ account, secret, tx }) {
    return new Promise((resolve,reject) => {
      const resultData = [];
      var remote1 = getRemote();
      remote1 .connectPromise()
        .then(async () => {
          const accountInfo = await remote1.requestAccountInfo({ account }).submitPromise();
          let sequence = accountInfo.account_data.Sequence;
          for (const i in tx) {
            const amount = remote1.makeAmount(tx[i].value, tx[i].currency, tx[i].issuer);
            const txObject = remote1.buildPaymentTx({
              account,
              to: tx[i].to,
              amount,
            });
            const response = await txObject.signPromise(
              secret,
              tx[i].addMemo ? tx[i].addMemo : '',
              sequence
            );
            sequence = sequence + 1;
            resultData.push(response);
          }
          resolve({ success: true, msg: '全部连接签名成功', data: resultData });
          remote1.disconnect();
        })
        .catch(e => {
          reject(e);
        });
    });
  }

  async function main(){
          var txBlob = await  signBatchBlob({ account, secret, tx });
          txBlob = txBlob.data;
          const resultData = [];
          var remote2 = getRemote();
          remote2.connectPromise()
           .then(async () => {
          for (const i in txBlob) {
            const txObject = remote2.buildSignTx({ blob: txBlob[i]});
            const response = await txObject.submitPromise()
              .then(result => {
                return { success: true, data: result };
              }).catch(e => {
                return { success: false, data: e };
              });
            if (response.success === true) {
              const response_abstract = {
                success: true,
                msg: `连接成功,交易结果为${response.data.engine_result}`,
                index: i,
                data: {
                  engine_result: response.data.engine_result,
                  engine_result_code: response.data.engine_result_code,
                  engine_result_message: response.data.engine_result_message,
                  sequence: response.data.tx_json.Sequence,
                  hash: response.data.tx_json.hash,
                },
              };
              resultData.push(response_abstract);
              continue;
            }
            if (response.success === false) {
              const response_abstract = {
                success: false,
                index: i,
                msg: response.data,
                data: {},
              };
              resultData.push(response_abstract);
              continue;
            }
          }
          console.log({ success: true, msg: '全部连接执行成功', data: resultData });
          remote2.disconnect();      
       })
        .catch(e => {
          console.log(e);
        });
  }

  main()
```

终端执行`node test.js`

终端返回的结果信息:

```
{ success: true,
  msg: '全部连接执行成功',
  data:
   [ { success: true,
       msg: '连接成功,交易结果为tesSUCCESS',
       index: '0',
       data: [Object] },
     { success: true,
       msg: '连接成功,交易结果为tesSUCCESS',
       index: '1',
       data: [Object] },
     { success: true,
       msg: '连接成功,交易结果为tesSUCCESS',
       index: '2',
       data: [Object] } ] 
 }
```



##### swtclib-app形式的restful api

添加如下代码到test2.js中

```
var request = require('request');
const url = 'http://10.13.0.103:7900';
var requestData = {
 "account":"j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9",
 "secret":"ssmNtj6a48FJEN3JZqaSGxVndXywi",
 "rsa":"false",
 "tx":[
 {
 "to":"jJeg3sZzh5KsZpCjyvzorQokpknviNBzzZ",
 "value":"0.02",
 "currency":"SWT",
 "issuer":" ",
 "addMemo":"测试1"
 },
 {
 "to":"jNByvf6ovN2Fh7axYQhSGwDLrfoQpSaAmi",
 "value":"0.02",
 "currency":"SWT",
 "issuer":" ",
 "addMemo":"测试2"
 },
 {
 "to":"jQnJiEqoW7MMSS7HCZBdWLMUXLcPSSPfQi",
 "value":"0.02",
 "currency":"SWT",
 "issuer":" ",
 "addMemo":"测试3"
 }
 ]
};
request({
    url: `${url}/sign/batch`,
    method: "POST",
    json: true,
    headers: {
        "content-type": "application/json",
    },
    body:requestData
}, (err,res,body)=>{
    if (!err && res.statusCode == 200) {
          request({
            url: `${url}/tx/batchblob`,
            method: "POST",
            json: true,
            headers: {
                "content-type": "application/json",
            },
            body:{
            "txBlob": [
                {
                    "blob":body.data[0]
                },
                {
                    "blob":body.data[1]
                },
                {
                    "blob":body.data[2]
                }
            ]
}},function(err,res,body){
    if (!err && res.statusCode == 200) {
          console.log(body);
    }
})
    }
});
```

终端执行`node test2.js`

终端返回的结果信息:

```
{ success: true,
  msg: '请求成功',
  code: 0,
  data:
   [ { success: true,
       msg: '连接成功,交易结果为tesSUCCESS',
       index: '0',
       data: [Object] },
     { success: true,
       msg: '连接成功,交易结果为tesSUCCESS',
       index: '1',
       data: [Object] },
     { success: true,
       msg: '连接成功,交易结果为tesSUCCESS',
       index: '2',
       data: [Object] } ] }
```



#### 15.查询某一交易具体信息

##### @swtc/lib

添加如下代码到test.js中

```
var jlib = require('@swtc/lib');
var Remote = jlib.Remote;
var remote = new Remote({server: 'ws://10.13.0.103:5020', issuer: 'jBciDE8Q3uJjf111VeiUNM775AMKHEbBLS'});
remote.connectPromise()
	.then(async () => {
    		let req = remote.requestTx({hash: '4B37D6E7B88354199DD49216448BB5C490050CDAC830D1E52DB8E5CFDD26BB4F'});
			let response = await req.submitPromise()
			console.log(response)
			remote.disconnect()
		}
	)
	.catch(console.error)
```

终端执行`node test.js`

终端返回的结果信息:

```
{ Account: 'jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH',
  Amount: '50000000',
  Destination: 'j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9',
  Fee: '10000',
  Flags: 0,
  Memos: [ { Memo: [Object] } ],
  Sequence: 30,
  SigningPubKey:
   '036D2125387E49040E121B72A2993E29261C2E745F043B59E915B0446849889593',
  TransactionType: 'Payment',
  TxnSignature:
   '304502210095E02F2D041EB1FBDB23856AC4969F6D2C53964935A931C0A45A432823DF49CB02203E55CBE462C4649491931B4940FE39BFFCF4B980AF33A98672A9CF3297959901',
  date: 636523590,
  hash:
   '4B37D6E7B88354199DD49216448BB5C490050CDAC830D1E52DB8E5CFDD26BB4F',
  inLedger: 15336229,
  ledger_index: 15336229,
  meta:
   { AffectedNodes: [ [Object], [Object], [Object] ],
     TransactionIndex: 0,
     TransactionResult: 'tesSUCCESS' },
  validated: true }
```



##### swtclib-app形式的restful api

添加如下代码到test2.js中

```
var request = require('request');
const url = 'http://10.13.0.103:7900';
var hash = '64885C36213A0821041D7AC7B7FD49D4B1588033106173A18B7239BC9EF1369A';
request(`${url}/tx/${hash}`, (err, res, body)=>{
  if (!err && res.statusCode == 200) {
    console.log(body);
  }
})
```

终端执行`node test2.js`

终端返回的结果信息:

```
{"success":true,"msg":"成功","code":0,"data":{"Account":"j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9","Amount":"100000","Destination":"jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH","Fee":"10000","Flags":0,"Memos":[{"Memo":{"MemoData":"786868E6B58BE8AF95E58D95E7AC94E694AFE4BB98"}}],"Sequence":3,"SigningPubKey":"02BE3719EA0BD52FC365FA84CE675276F14991717C9B1F4E58FC2AD9CDCCA9BF57","TransactionType":"Payment","TxnSignature":"3045022100A91765442707E35CBF4113F46AEE55CCC077FEBEC70B8907DB923593C3D808FA0220376601BF4D959B6927A6E45C1B8F10CECE97797096677EB5C26156B876B5A262","date":636538380,"hash":"64885C36213A0821041D7AC7B7FD49D4B1588033106173A18B7239BC9EF1369A","inLedger":15337708,"ledger_index":15337708,"meta":{"AffectedNodes":[{"ModifiedNode":{"FinalFields":{"Account":"jEoSyfChhUMzpRDttAJXuie8XhqyoPBYvV","Balance":"636414612593","Flags":0,"OwnerCount":1,"Sequence":50784536},"LedgerEntryType":"AccountRoot","LedgerIndex":"109E80FB8CC6D82D4F7F7D77248C2C3C116ECCD4520B3D2A88421FFF94A57B1E","PreviousFields":{"Balance":"636414602593","Sequence":50784535},"PreviousTxnID":"8E51BFADB0ACDCD02BAC81219997A66F07BE2CC10F3F214BA85F610AA76FF456","PreviousTxnLgrSeq":15337707}},{"ModifiedNode":{"FinalFields":{"Account":"jf2h1fJVcD1bH15TnUBRrscpVkdLeiSirH","Balance":"35800000","Flags":0,"OwnerCount":0,"Sequence":31},"LedgerEntryType":"AccountRoot","LedgerIndex":"1E50C3D5C15CB32F986B65DF5354E2F7C987E7B58AEDDA3402CE72D7BF1475B7","PreviousFields":{"Balance":"35700000"},"PreviousTxnID":"2D5D938AD59D3A2C962581170355F41F2D3FE2A7D9F696309AB8FFFEB8E0D53D","PreviousTxnLgrSeq":15337660}},{"ModifiedNode":{"FinalFields":{"Account":"j4WTWZ8mWDfQtcZy3i5JZahBqcTMv3EJR9","Balance":"39870000","Flags":0,"OwnerCount":0,"Sequence":4},"LedgerEntryType":"AccountRoot","LedgerIndex":"3636E63C0105B82E4B00FDFDDC22FA6D3BAB93B5D684C3C24A927420597CF3BE","PreviousFields":{"Balance":"39980000","Sequence":3},"PreviousTxnID":"2D5D938AD59D3A2C962581170355F41F2D3FE2A7D9F696309AB8FFFEB8E0D53D","PreviousTxnLgrSeq":15337660}}],"TransactionIndex":0,"TransactionResult":"tesSUCCESS"},"validated":true}}
```





